/*! rappie_stream 1.9.0 (built at 2018-07-17 11:39:23) */
/*! UADF 0.16.1 (built at 2018-07-17 11:39:23) */
!function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 109, 32170);"use strict";function c(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 136, 211);g[a]||(g[a]={name:a,deps:b,callback:c,initialized:null})}for(var d="YJ_UADF",e=!1,f=a;a.top!=f;){f=f.parent;try{f.document.URL}catch(a){e=!0;break}}var g={};if(e){var h={},i=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 328, 340);};h._registerComponent=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 362, 374);},h.initComponent=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 391, 414);return null},h.exportAPI=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 427, 439);},h.init=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 447, 467);return!1}}else{var h=function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 479, 531);return a.top[b]||(a.top[b]={}),a.top[b]}(d),i=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 537, 726);if(a.initialized)return a.initialized;for(var b=[],c=0;c<a.deps.length;c++){var d=a.deps[c];b.push(i(g[d]))}var e=a.callback.apply(a,b);return a.initialized=e||{},a.initialized};h._registerComponent=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 748, 880);h.components||(h.components={}),h.components[b]||(h.components[b]={}),h.components[b][c]||(h.components[b][c]=g[a])},h.initComponent=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 897, 995);return h.components&&h.components[a]&&h.components[a][b]?i(h.components[a][b]):null},h.exportAPI=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1008, 1089);h[a]||(h[a]={});for(var c in b)b.hasOwnProperty(c)&&(h[a][c]=b[c])}}c("core/loader",[],function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1109, 1121);}),c("dev/flags",[],function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1140, 1181);return{debug:!1,debugLevel:0}});var j="0.16.1";c("core/core_util",["dev/flags"],function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1231, 2569);return{inherit:function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1258, 1431);if(Object.create)a.prototype=Object.create(b.prototype);else{var c=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1339, 1351);};c.prototype=b.prototype,a.prototype=new c}a.prototype.constructor=a,a.super_=b},isInherited:function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1444, 1525);for(var c=a;;){if(c===b)return!0;if(!c.super_)return!1;c=c.super_}},isArray:function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1534, 1605);return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1615, 1687);return"[object String]"===Object.prototype.toString.call(a)},isNumber:function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1697, 1769);return"[object Number]"===Object.prototype.toString.call(a)},forEach:function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1778, 1873);if(a.forEach)a.forEach(b,c);else for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)},map:function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1878, 1989);if(a.map)return a.map(b,c);for(var d=[],e=0;e<a.length;e++)d.push(b.call(c,a[e],e,a));return d},filter:function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 1997, 2121);if(a.filter)return a.filter(b,c);for(var d=[],e=0;e<a.length;e++){b.call(c,a[e],e,a)&&d.push(a[e])}return d},forEachHash:function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2134, 2205);for(var d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d],a)},formatObject:function(a,b,c,d,e){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2219, 2356);var f="";for(var g in a)if(a.hasOwnProperty(g)){f.length>0&&(f+=c);var h=d?d(g):g,i=e?e(a[g]):a[g];f+=h+b+i}return f},extend:function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2364, 2488);for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},makeRandomString:function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2506, 2567);return Math.floor(1e9*Math.random()).toString(32)}}}),c("core/dom_util",["dev/flags","core/core_util"],function(b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2620, 6506);function d(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2634, 2902);this.top=a.top,this.left=a.left,a.width?(this.width=a.width,this.height=a.height,this.bottom=this.top+this.height,this.right=this.left+this.width):(this.bottom=a.bottom,this.right=a.right,this.width=this.right-this.left,this.height=this.bottom-this.top)}function e(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2902, 2981);return a.ownerDocument.defaultView||a.ownerDocument.parentWindow}function f(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2981, 3155);function c(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 2997, 3143);if(!a(b))return!1;for(var d=b.frames,e=0;e<d.length;e++){var f=d[e];try{f.document.URL}catch(a){continue}if(!c(f))return!1}return!0}b=b||p,c(b)}function g(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 3155, 3220);return a.currentStyle||e(a).getComputedStyle(a,"")}function h(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 3220, 3317);var b=g(a);return b.overflow.indexOf("scroll")>=0||b.overflow.indexOf("hidden")>=0}function i(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 3317, 3627);b=b||0,c=c||0;for(var f=0,g=0,h=a;;){var i=e(h).frameElement;if(!i)break;var j=i.getBoundingClientRect();f+=j.top,g+=j.left,h=i}var k=a.getBoundingClientRect();return new d({top:Math.round(k.top+c+f),left:Math.round(k.left+b+g),bottom:Math.round(k.bottom+c+f),right:Math.round(k.right+b+g)})}function j(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 3627, 3789);var b=a.getBoundingClientRect();return new d({top:Math.round(b.top),left:Math.round(b.left),bottom:Math.round(b.bottom),right:Math.round(b.right)})}function k(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 3789, 4110);var a=p.innerWidth||q.documentElement.clientWidth,b=p.innerHeight||q.documentElement.clientHeight,c=0,e=0;return q.body&&(c=q.body.scrollLeft||q.documentElement.scrollLeft,e=q.body.scrollTop||q.documentElement.scrollTop),new d({top:Math.round(e),left:Math.round(c),width:Math.round(a),height:Math.round(b)})}function l(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 4110, 4301);var a=0,b=0;return q.body&&(b=q.body.scrollWidth||q.documentElement.scrollWidth,a=q.body.scrollHeight||q.documentElement.scrollHeight),{width:Math.round(b),height:Math.round(a)}}function m(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 4301, 4461);var a=p.innerWidth||q.documentElement.clientWidth,b=p.innerHeight||q.documentElement.clientHeight;return{width:Math.round(a),height:Math.round(b)}}function n(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 4461, 4629);a=a||p;var b=q.body.scrollLeft||q.documentElement.scrollLeft,c=q.body.scrollTop||q.documentElement.scrollTop;return{left:Math.round(b),top:Math.round(c)}}function o(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 4629, 4757);this.elem=a,this.zeroSizeViewableMode=c&&c.zeroSizeViewableMode,this.trimmedRect=null,b&&(this.trimmedRect=b)}var p=a.top,q=p.document;return d.prototype.toString=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 4810, 4932);return"Rect W:"+this.width+" H:"+this.height+" T:"+this.top+" L:"+this.left+" B:"+this.bottom+" R:"+this.right},d.prototype.transfer=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 4954, 5022);this.left+=a,this.right+=a,this.top+=b,this.bottom+=b},d.prototype.copy=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5040, 5070);return new d(this)},d.prototype.getOverlappedArea=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5101, 5328);var b=Math.max(this.top,a.top),c=Math.min(this.bottom,a.bottom),e=Math.max(this.left,a.left),f=Math.min(this.right,a.right);return new d(c-b>0&&f-e>0?{top:b,bottom:c,left:e,right:f}:{top:0,bottom:0,left:0,right:0})},o.prototype.calcLayoutPosition=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5360, 5720);function a(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5371, 5502);for(var c=a;;){if((c=c.parentNode)===c.ownerDocument.body)break;h(c)&&(b.unshift(c),d+=c.scrollTop,f+=c.scrollLeft)}}var b=[],c=n(),d=c.top,f=c.left;a(this.elem);for(var g=e(this.elem);g!=p;){b.unshift(g.frameElement);var j=n(g);d+=j.top,f+=j.left,a(g.frameElement),g=g.parent}this.layoutPosition=i(this.elem,f,d),this.scrollParents=b},o.prototype.getLayoutPosition=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5751, 5840);return!a&&this.layoutPosition||this.calcLayoutPosition(),this.layoutPosition},o.prototype.getViewableRect=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5869, 6379);this.scrollParents||this.calcLayoutPosition();var b=a||k(),e=c.map(this.scrollParents,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 5967, 5988);return a});e.push(this.elem);for(var f=null,g=b,h=0;h<e.length;h++){if(f=i(e[h],b.left,b.top),this.zeroSizeViewableMode){var j=0===f.width?1:f.width,l=0===f.height?1:f.height;f=new d({top:f.top,left:f.left,width:j,height:l})}if(g=g.getOverlappedArea(f),0===g.width||0===g.height)break}if(this.trimmedRect){var m=this.trimmedRect.copy();return m.transfer(f.left,f.top),g.getOverlappedArea(m)}return g},{Rect:d,traverseAllWindows:f,getElementRect:j,getViewedRect:k,getPageSize:l,getScreenSize:m,getScrollPos:n,ElementPosition:o}}),c("core/master",["dev/flags"],function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6538, 6887);var b=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6556, 6619);this.baseTime=a,this.incrementedKey=0,this.data={}};return b.prototype.getElapsedTime=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6654, 6706);return(new Date).getTime()-this.baseTime},b.prototype.getAutoIncrementedKey=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6741, 6780);return++this.incrementedKey},b.prototype.set=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6797, 6826);this.data[a]=b},b.prototype.get=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6843, 6875);return this.data[a]},{Master:b}}),c("core/event",["dev/flags","core/core_util","core/dom_util"],function(b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6951, 11923);function e(a,b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 6967, 7071);a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)}function f(a,b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7071, 7181);a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)}var g=a.top,h=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7195, 7277);this.pollInterval=a,this.targets=[],this.timer=null,this.activeNums=0};h.prototype.start=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7296, 7383);var a=this;this.timer=g.setInterval(function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7343, 7363);a.poll()},this.pollInterval)},h.prototype.stop=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7401, 7456);g.clearInterval(this.timer),this.timer=null},h.prototype.poll=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7474, 7782);var a=(new Date).getTime();c.forEach(this.targets,function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7535, 7775);b.active&&a-b.lastFiredAt>=b.interval&&(b.method.call(b.context,"Polling"),b.lastFiredAt=a,b.lazyMode&&(b.lazyCounter++,b.lazyCounter>30&&(b.interval=1e3),b.lazyCounter>60&&(b.interval=3e3),b.lazyCounter>100&&(b.interval=1e4)))},this)},h.prototype.registerHandler=function(a,b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 7811, 8003);var e=(new Date).getTime(),f=d?200:a,g={active:!1,interval:f,context:b,method:c,lastFiredAt:e,lazyMode:!!d,lazyCounter:0},h=this.targets.length;return this.targets.push(g),h},h.prototype.activateHandler=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8032, 8130);var b=this.targets[a];b.active=!0,0===this.activeNums&&this.start(),this.activeNums++},h.prototype.deactivateHandler=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8161, 8242);var b=this.targets[a];b.active=!1,0===--this.activeNums&&this.stop()};var i=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8249, 8565);this.manager=a,this.context=b.context,this.method=b.method,this.name=b.name||this.method.name||"UNNAMED",this.events=b.events||[],this.polling=b.polling||-1,this.lazyPolling=b.lazyPolling,this.minInterval=b.minInterval||0,this.lastFiredAt=0,this.eventKeys=[],this.pollingKey=-1,this.registerHandlers()};i.prototype.registerHandlers=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8595, 8904);c.forEach(this.events,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8628, 8744);var b=this.manager.getEvent(a),c=b.registerHandler(this,this.fire);this.eventKeys.push({event:b,key:c})},this),(this.polling>=0||this.lazyPolling)&&(this.pollingKey=this.manager.poller.registerHandler(this.polling,this,this.fire,this.lazyPolling)),this.activate()},i.prototype.activate=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8926, 9085);c.forEach(this.eventKeys,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 8962, 9005);a.event.activateHandler(a.key)},this),this.pollingKey>=0&&this.manager.poller.activateHandler(this.pollingKey)},i.prototype.deactivate=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9109, 9272);c.forEach(this.eventKeys,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9145, 9190);a.event.deactivateHandler(a.key)},this),this.pollingKey>=0&&this.manager.poller.deactivateHandler(this.pollingKey)},i.prototype.fire=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9290, 9533);var c=(new Date).getTime(),d=!1;if(0===this.minInterval||0===this.lastFiredAt?d=!0:c-this.lastFiredAt>this.minInterval&&(d=!0),d){var e=b||{};this.lastFiredAt=c;var f=c-this.manager.baseTime;this.method.call(this.context,f,a,e)}};var j=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9540, 9605);this.baseTime=a,this.poller=new h(50),this.events={}};j.prototype.newAction=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9628, 9661);return new i(this,a)},j.prototype.getEvent=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9683, 9803);if(this.events[a])return this.events[a];if(!o[a])return null;var b=new o[a](this);return this.events[a]=b,b};var k=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9810, 9874);this.eventName="",this.handlers=[],this.activeNums=0};k.prototype.registerHandler=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 9903, 10008);var c={active:!1,context:a,method:b},d=this.handlers.length;return this.handlers.push(c),d},k.prototype.activateHandler=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10037, 10136);var b=this.handlers[a];b.active=!0,0===this.activeNums&&this.setup(),this.activeNums++},k.prototype.deactivateHandler=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10167, 10252);var b=this.handlers[a];b.active=!1,0===--this.activeNums&&this.cleanup()},k.prototype.setup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10271, 10283);},k.prototype.fire=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10301, 10408);c.forEach(this.handlers,function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10337, 10401);b.active&&b.method.call(b.context,this.eventName,a)},this)},k.prototype.cleanup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10429, 10441);};var l=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10448, 10507);k.apply(this,arguments),this.eventName="onLoad"};c.inherit(l,k),l.prototype.setup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10541, 10651);var a=this;this.boundHandler=function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10581, 10617);a.fire({nativeEvent:b})},e(g,"load",this.boundHandler,!1)},l.prototype.cleanup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10672, 10716);f(g,"load",this.boundHandler,!1)};var m=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10723, 10785);k.apply(this,arguments),this.eventName="pageLeave"};c.inherit(m,k),m.prototype.setup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10819, 10935);var a=this;this.nativeWrapper=function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10860, 10896);a.fire({nativeEvent:b})},e(g,"pagehide",this.nativeWrapper,!1)},m.prototype.cleanup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 10956, 11005);f(g,"pagehide",this.nativeWrapper,!1)};var n=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11012, 11078);k.apply(this,arguments),this.eventName="viewPosChange"};c.inherit(n,k),n.prototype.setup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11112, 11274);var a=this;this.nativeWrapper=function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11153, 11198);a.nativeHandler({nativeEvent:b})},e(g,"scroll",this.nativeWrapper,!1),e(g,"touchmove",this.nativeWrapper,!1)},n.prototype.nativeHandler=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11301, 11682);var b=d.getViewedRect();a.rect=b,this.lastViewedRect?b.width!==this.lastViewedRect.width||b.height!==this.lastViewedRect.height?(this.fire(a),this.lastViewedRect=b):(Math.abs(b.top-this.lastViewedRect.top)>=this.changeThreshold||Math.abs(b.left-this.lastViewedRect.left)>=this.changeThreshold)&&(this.fire(a),this.lastViewedRect=b):(this.fire(a),this.lastViewedRect=b)},n.prototype.changeThreshold=50,n.prototype.cleanup=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11734, 11820);f(g,"scroll",this.nativeWrapper,!1),f(g,"touchmove",this.nativeWrapper,!1)};var o={onLoad:l,pageLeave:m,viewPosChange:n};return{EventManager:j,MetaEvent:k,MetaEventDefinition:o}}),c("core/beacon_sender",["dev/flags","core/core_util"],function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11979, 12757);var c=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 11999, 12160);if("https:"===location.protocol){if(!a.httpsUri)return;this.uri=a.httpsUri}else this.uri=a.uri;this.requestType=a.requestType,this.dryRun=!!a.dryRun};return c.prototype.MAX_LENGTH_FOR_EACH_REQUEST=8e3,c.prototype.getQueryMaxLength=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12242, 12309);return this.MAX_LENGTH_FOR_EACH_REQUEST-this.uri.length},c.prototype.sendString=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12333, 12363);this.doRequest(a)},c.prototype.doRequest=function(c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12386, 12739);if(a.debug){b.map(c.split("&"),function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12429, 12559);var b=a.split("=");return 1===b.length?decodeURIComponent(b[0]):decodeURIComponent(b[0])+":"+decodeURIComponent(b[1])}).join(", ")}var d=this.getQueryMaxLength();if(c.length>d&&(c=c.substring(0,d)),!this.dryRun){var e=document.createElement("img"),f=this.uri;c.length>0&&(f+="?"+c+"&EOQ",e.src=f)}},{BeaconSender:c}}),c("core/beacon_query",["dev/flags","core/core_util"],function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12812, 18778);function c(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12826, 12918);return a instanceof e?a:b.isString(a)||b.isNumber(a)?new f(a.toString()):null}var d=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 12924, 13082);this.dataDef=a,this.lastElapsedTime=-1,this.history=[],this.history.push([0,{}]),this.dataSize=0,this.separatorNums={sep1:0,sep2:0,sep3:0,sep4:0}};d.prototype.newItem=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 13103, 13511);this.lastElapsedTime=a;var c={},d=0;for(var e in b)if(b.hasOwnProperty(e)){var f=encodeURIComponent(b[e].toString());this.hasDiff(e,f)&&(c[e]=f,this.dataSize+=e.length,this.dataSize+=f.length,this.separatorNums.sep2++,++d>1&&this.separatorNums.sep3++)}d>0&&(this.history.push([a,c]),this.dataSize+=a.toString().length,this.separatorNums.sep1++,this.history.length>2&&this.separatorNums.sep4++)},d.prototype.hasDiff=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 13532, 13672);for(var c=this.history.length-1;c>=0;c--){var d=this.history[c][1];if(d.hasOwnProperty(a))return d[a]!==b.toString()}return!0},d.prototype.calcDataSize=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 13698, 14019);var b={sep1:encodeURIComponent(a.sep1).length,sep2:encodeURIComponent(a.sep2).length,sep3:encodeURIComponent(a.sep3).length,sep4:encodeURIComponent(a.sep4).length};return this.dataSize+this.separatorNums.sep1*b.sep1+this.separatorNums.sep2*b.sep2+this.separatorNums.sep3*b.sep3+this.separatorNums.sep4*b.sep4},d.prototype.shrink=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14039, 14319);for(var a={},c=this.history.length,d=(function(b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14088, 14119);b in a||(a[b]=c)}),e=c-1;e>=0;e--){var f=this.history[e][1];b.forEachHash(f,d,this)}var g=this.history[c-1][0];this.history=[],this.history.push([g,a]),this.dataSize=0,this.separatorNums={sep1:0,sep2:0,sep3:0,sep4:0}},d.prototype.forEach=function(a,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14340, 14577);if(!(this.history.length<=1)){var d=this.history.length,e={},f=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14417, 14438);e[a]=b};b.forEachHash(this.history[0][1],f);for(var g=1;g<d;g++){var h=this.history[g][0],i=this.history[g][1];b.forEachHash(i,f),a.call(c,h,e)}}},d.prototype.serialize=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14600, 14836);var c="";return b.forEach(this.history,function(d,e){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14651, 14832);c.length>0&&(c+=encodeURIComponent(a.sep4)),e>0&&(c+=d[0],c+=encodeURIComponent(a.sep1),c+=b.formatObject(d[1],encodeURIComponent(a.sep2),encodeURIComponent(a.sep3)))}),c};var e=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14843, 14887);this.dataSize=0,this.parent=null};e.prototype.incrementSize=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 14914, 14985);this.dataSize+=a,this.parent&&this.parent.incrementSize(a)},e.prototype.decrementSize=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15012, 15083);this.dataSize-=a,this.parent&&this.parent.decrementSize(a)},e.prototype.getDataSize=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15108, 15140);return this.dataSize},e.prototype.exports=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15161, 15173);};var f=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15180, 15293);e.apply(this,arguments),this.value=b?a:encodeURIComponent(a),this.incrementSize(this.value.length)};b.inherit(f,e),f.prototype.exports=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15329, 15358);return this.value};var g=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15365, 15449);e.apply(this,arguments),this.sep=encodeURIComponent(a),this.children=[]};b.inherit(g,e),g.prototype.exports=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15485, 15576);return b.map(this.children,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15523, 15554);return a.exports()},this).join(this.sep)},g.prototype.push=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15594, 15744);var b=c(a);this.children.length>0&&this.incrementSize(this.sep.length),this.incrementSize(b.dataSize),this.children.push(b),b.parent=this},g.prototype.clear=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15763, 15808);this.children=[],this.dataSize=0};var h=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15815, 15949);e.apply(this,arguments),this.keySep=encodeURIComponent(a),this.valSep=encodeURIComponent(b),this.hash={},this.keyNums=0};b.inherit(h,e),h.prototype.exports=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 15985, 16117);var a="";return b.forEachHash(this.hash,function(b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 16036, 16108);a.length>0&&(a+=this.valSep),a+=b+this.keySep+c.exports()},this),a},h.prototype.update=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 16137, 16413);var d=c(b),e=encodeURIComponent(a);this.hash[e]&&this.remove(a),this.keyNums++,this.keyNums>1&&this.incrementSize(this.valSep.length),this.incrementSize(e.length),this.incrementSize(this.keySep.length),this.incrementSize(d.dataSize),this.hash[e]=d,d.parent=this},h.prototype.remove=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 16433, 16685);var b=encodeURIComponent(a),c=this.hash[b];c&&(this.decrementSize(b.length),this.decrementSize(this.keySep.length),this.decrementSize(c.dataSize),this.keyNums-=1,0!==this.keyNums&&this.decrementSize(this.valSep.length),delete this.hash[b])},h.prototype.get=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 16702, 16754);return this.hash[encodeURIComponent(a)]};var i=function(a,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 16761, 17256);this.options=c||{},this.definition={},this.exportOrder=[],this.staticValueNums=0,this.staticValueSize=0,b.forEach(a,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 16891, 17249);a._encodedKey=encodeURIComponent(a.key),"static"===a.type&&(a._encodedValue=encodeURIComponent(a.value),this.staticValueSize+=a._encodedKey.length,this.staticValueSize+=1,this.staticValueSize+=a._encodedValue.length,this.staticValueNums>0&&(this.staticValueSize+=1),this.staticValueNums++),this.definition[a.name]=a,this.exportOrder.push(a.name)},this)};i.prototype.getInstance=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 17281, 17311);return new j(this)},i.prototype.isDefinedVar=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 17337, 17408);return this.definition[a]&&"var"===this.definition[a].type},i.prototype.getStaticValueSize=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 17440, 17479);return this.staticValueSize},i.prototype.setLazyStaticValue=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 17511, 18006);var c=this.definition[a];c._encodedValue&&(this.staticValueSize-=c._encodedKey.length,this.staticValueSize-=1,this.staticValueSize-=c._encodedValue.length,c._encodedValue=null,this.staticValueNums-=1,0!==this.staticValueNums&&(this.staticValueSize-=1)),b&&(c._encodedValue=encodeURIComponent(b),this.staticValueSize+=c._encodedKey.length,this.staticValueSize+=1,this.staticValueSize+=c._encodedValue.length,this.staticValueNums>0&&(this.staticValueSize+=1),this.staticValueNums++)};var j=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 18013, 18054);this.template=a,this.vars={}};return j.prototype.bind=function(a,b,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 18079, 18170);var e;e=d?new f(b,!0):c(b),this.template.isDefinedVar(a)&&(this.vars[a]=e)},j.prototype.exports=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 18191, 18668);var a="";return b.forEach(this.template.exportOrder,function(c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 18254, 18659);var d=this.template.definition[c];"static"===d.type&&(a.length>0&&(a+="&"),a+=d._encodedKey+"="+d._encodedValue),"lazy-static"===d.type?d._encodedValue&&(a.length>0&&(a+="&"),a+=d._encodedKey+"="+d._encodedValue):"random"===d.type?(a.length>0&&(a+="&"),a+=d._encodedKey+"="+b.makeRandomString()):"var"===d.type&&this.vars[c]&&(a.length>0&&(a+="&"),a+=d._encodedKey+"="+this.vars[c].exports())},this),a},{HistoricalData:d,StringBeaconData:f,ArrayBeaconData:g,HashBeaconData:h,BeaconQueryTemplate:i,BeaconQuery:j}}),c("core/core",["dev/flags","core/core_util","core/dom_util","core/master","core/event","core/beacon_sender","core/beacon_query"],function(a,b,c,d,e,f,g){___jdce_logger("lacuna_cache/imported_afb4gr.js", 18909, 19129);var h=new d.Master((new Date).getTime()),i=new e.EventManager(h.baseTime);return h.set("eventManager",i),{CoreUtil:b,DOMUtil:c,Event:e,BeaconSender:f,BeaconQuery:g,getMaster:function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19107, 19127);return h}}}),c("detector/detector",["dev/flags","core/core"],function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19179, 20139);var c=b.CoreUtil,d=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19212, 19305);this.serialNumber=b.getMaster().getAutoIncrementedKey(),this.registerAllActions()};return d.prototype.actions={},d.prototype.registerAllActions=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19367, 19487);c.forEachHash(this.actions,function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19405, 19480);var c=this.registerAction(a,b);this.actions[a]._registered=c},this)},d.prototype.deactivateAllActions=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19521, 19607);c.forEachHash(this.actions,function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19559, 19600);b._registered.deactivate()},this)},d.prototype.registerAction=function(a,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19635, 19836);var d={context:this,method:this[a],name:a,events:c.events,polling:c.polling,lazyPolling:c.lazyPolling,minInterval:c.minInterval},e=b.getMaster().get("eventManager");return e.newAction(d)},d.prototype.isCollectedElem=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 19865, 19995);if(a.__uadfCollectedBy)for(var b=a.__uadfCollectedBy,c=0;c<b.length;c++)if(b[c]===this.serialNumber)return!0;return!1},d.prototype.setAsCollected=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 20023, 20125);a.__uadfCollectedBy||(a.__uadfCollectedBy=[]),a.__uadfCollectedBy.push(this.serialNumber)},{Detector:d}}),c("detector/simple_viewable_detector",["dev/flags","core/core","detector/detector"],function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 20225, 25448);var d=b.CoreUtil,e=b.DOMUtil,f=b.BeaconSender,g=b.BeaconQuery,h=g.BeaconQueryTemplate,i=g.ArrayBeaconData,j=c.Detector,k=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 20362, 20405);this.data=new i(this.separator)};k.prototype.separator="!",k.prototype.push=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 20449, 20479);this.data.push(a)};var l=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 20486, 20975);this.rawElement=a,this.trimmedRect=b&&b.trimmedRect?b.trimmedRect:null,this.zeroSizeViewableMode=b&&b.zeroSizeViewableMode;var c={zeroSizeViewableMode:this.zeroSizeViewableMode};this.position=new e.ElementPosition(this.rawElement,this.trimmedRect,c),this.layoutPosition=this.position.getLayoutPosition(),this.lastViewedIn=!1,this.lastViewedStart=0,this.currentViewedTime=0,this.viewedEnoughTime=!1,this.notifiedOnce=!1,this.viewInTimes=[],this.viewOutTimes=[],this.options=b};l.prototype.VIEWED_TIME_CONDITION=1e3,l.prototype.VIEWED_AREA_CONDITION=.5,l.prototype.isBeaconedTarget=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 21080, 21140);return this.viewedEnoughTime&&!this.notifiedOnce},l.prototype.setAsNotified=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 21167, 21199);this.notifiedOnce=!0},l.prototype.calcViewableArea=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 21229, 21611);var c=this.position.getViewableRect(),d=c.width*c.height;if(0===d)return 0;var f=this.trimmedRect?this.trimmedRect:e.getElementRect(this.rawElement);if(this.zeroSizeViewableMode){var g=0===f.width?1:f.width,h=0===f.height?1:f.height;f=new e.Rect({top:f.top,left:f.left,width:g,height:h})}var i=f.width*f.height,j=a.width*a.height;return 0===i||0===j?0:d/Math.min(i,j)},l.prototype.check=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 21630, 21847);var d=this.calcViewableArea(b,c),e=d>=this.VIEWED_AREA_CONDITION;this.lastViewedIn&&e?this.handleViewContinue(a):this.lastViewedIn&&!e?this.handleViewOut(a):!this.lastViewedIn&&e&&this.handleViewIn(a)},l.prototype.handleViewIn=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 21873, 21998);this.lastViewedIn=!0,this.lastViewedStart=a,this.currentViewedTime=0,this.viewInTimes.push(this.lastViewedStart)},l.prototype.handleViewContinue=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 22030, 22196);this.currentViewedTime=b.getMaster().getElapsedTime()-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&(this.viewedEnoughTime=!0)},l.prototype.handleViewOut=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 22223, 22455);this.currentViewedTime=a-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&(this.viewedEnoughTime=!0),this.viewOutTimes.push(a),this.lastViewedIn=!1,this.lastViewedStart=0,this.currentViewedTime=0};var m=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 22462, 22669);j.apply(this,arguments),this.targets=[],this.beaconSender=new this.BeaconSenderConstructor(this.beaconConfig),this.viewedQueryTmpl=new this.BeaconQueryTemplateConstructor(this.viewedQueryTmplDef)};return d.inherit(m,j),m.prototype.BeaconSenderConstructor=f.BeaconSender,m.prototype.BeaconQueryTemplateConstructor=h,m.prototype.BeaconDataListConstructor=k,m.prototype.ViewableTargetConstructor=l,m.prototype.actions={collectTargets:{events:["onLoad"],polling:5e3},checkViewableState:{events:["onLoad","viewPosChange"],polling:300,minInterval:300},viewedBeacon:{events:["pageLeave"],lazyPolling:!0}},m.prototype.collectTargetElements=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23105, 23125);return[]},m.prototype.collectTargets=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23153, 23261);var e=this.collectTargetElements();e&&d.forEach(e,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23219, 23254);this.registerTarget(a)},this)},m.prototype.registerTarget=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23289, 23462);if(!this.isCollectedElem(a)||b&&b.canDuplicate){var c=new this.ViewableTargetConstructor(a,b);return this.targets.push(c),this.setAsCollected(a),c}return null},m.prototype.checkViewableState=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23494, 23665);var f=c.rect?c.rect:e.getViewedRect();d.forEach(this.targets,function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23571, 23596);b.check(a,f)},this),this.checkViewableState_InstantMode&&this.viewedBeacon(a,b,c)},m.prototype.checkViewableStateStart=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23702, 23867);if(this.checkViewableStateInProgress)return!0;this.checkViewableStateIndex=0,this.checkViewableStateInProgress=!0,this.checkViewableStateStep(a,b,c)},m.prototype.checkViewableStateStep=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 23903, 24347);if(this.checkViewableStateInProgress){for(var d=c.rect?c.rect:e.getViewedRect(),f=this.checkViewableStateIndex+this.checkViewableStateStepSize,g=!1;this.checkViewableStateIndex<f;){var h=this.targets[this.checkViewableStateIndex];if(!h){g=!0;break}h.check(a,d),this.checkViewableStateIndex++}g&&(this.checkViewableStateIndex=0,this.checkViewableStateInProgress=!1),this.checkViewableState_InstantMode&&this.viewedBeacon(a,b,c)}},m.prototype.checkViewableStateStepSize=200,m.prototype.checkViewableState_InstantMode=!1,m.prototype.getBeaconDataForTarget=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 24472, 24540);return this.getBeaconDataForTargetElement(a.rawElement)},m.prototype.getBeaconDataForTargetElement=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 24583, 24604);return""},m.prototype.viewedBeacon=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 24630, 25065);var e=d.filter(this.targets,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 24674, 24714);return a.isBeaconedTarget()},this),f=d.map(e,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 24731, 24799);return a.setAsNotified(),this.getBeaconDataForTarget(a)},this);if(f.length>0){var g=new this.BeaconDataListConstructor;d.forEach(f,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 24874, 24896);g.push(a)},this);var h=this.viewedQueryTmpl.getInstance();h.bind(this.viewedBeaconDataKey,g.data),this.viewedBeaconModifyQuery(a,b,c,h),this.beaconSender.sendString(h.exports())}},m.prototype.viewedBeaconModifyQuery=function(a,b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 25102, 25121);},m.prototype.viewedBeaconDataKey="viewed",m.prototype.beaconConfig={uri:"http://"+location.host+"/beacon.gif",httpsUri:"https://s."+location.host+"/beacon.gif",requestType:"image"},m.prototype.viewedQueryTmplDef=[{name:"viewed",type:"var",key:"viewed"}],{SimpleBeaconDataList:k,SimpleViewableTarget:l,SimpleViewableDetector:m}}),c("detector/deep_viewable_detector",["dev/flags","core/core","detector/simple_viewable_detector"],function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 25548, 31813);var d=b.CoreUtil,e=b.DOMUtil,f=b.BeaconQuery,g=(f.BeaconQueryTemplate,f.StringBeaconData,f.ArrayBeaconData),h=f.HashBeaconData,i=f.HistoricalData,j=c.SimpleViewableDetector,k=c.SimpleViewableTarget,l=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 25764, 25862);this.data=new h(this.separators.rootKeySep,this.separators.rootValSep),this.hasDiff=!1};l.prototype.separators={rootKeySep:":",rootValSep:",",inOutsSep:""},l.prototype.keyNameMap={id:"r",width:"w",height:"h",posX:"px",posY:"py",inOuts:"io"},l.prototype.updateStringValue=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26046, 26249);var c=!1,d=this.data.get(this.keyNameMap[a]),e=this.formatter[a]?this.formatter[a].apply(this,b):b[0];d?e!==d.value&&(c=!0):c=!0,c&&(this.data.update(this.keyNameMap[a],e),this.hasDiff=!0)},l.prototype.updateId=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26271, 26322);this.data.update(this.keyNameMap.id,a)},l.prototype.updateWidth=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26347, 26395);this.updateStringValue("width",[a])},l.prototype.updateHeight=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26421, 26470);this.updateStringValue("height",[a])},l.prototype.updatePosX=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26494, 26541);this.updateStringValue("posX",[a])},l.prototype.updatePosY=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26565, 26612);this.updateStringValue("posY",[a])},l.prototype.formatter={},l.prototype.getInOutsArray=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26665, 26812);var a=this.data.get(this.keyNameMap.inOuts);return a||(a=new g(this.separators.inOutsSep),this.data.update(this.keyNameMap.inOuts,a)),a},l.prototype.pushInOuts=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26836, 26962);var c=this.getInOutsArray();"in"===a?(c.push("i"+b),this.hasDiff=!0):"out"===a&&(c.push("o"+b),this.hasDiff=!0)},l.prototype.clearAfterSent=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 26990, 27217);this.data.remove(this.keyNameMap.width),this.data.remove(this.keyNameMap.height),this.data.remove(this.keyNameMap.posX),this.data.remove(this.keyNameMap.posY),this.data.remove(this.keyNameMap.inOuts),this.hasDiff=!1},l.prototype.getDataSize=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 27242, 27284);return this.data.getDataSize()};var m=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 27291, 27632);k.apply(this,arguments),this.beaconData=new this.BeaconDataConstructor,this.beaconData.updateId(this.getId()),this.beaconData.updateWidth(this.layoutPosition.width),this.beaconData.updateHeight(this.layoutPosition.height),this.beaconData.updatePosX(this.layoutPosition.left),this.beaconData.updatePosY(this.layoutPosition.top)};d.inherit(m,k),m.prototype.BeaconDataConstructor=l,m.prototype.getId=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 27702, 27761);return Math.floor(1e3*Math.random()).toString()},m.prototype.getGroupingId=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 27788, 27809);return"g"},m.prototype.handleViewIn=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 27835, 27978);m.super_.prototype.handleViewIn.apply(this,arguments),this.beaconData.pushInOuts("in",this.viewInTimes[this.viewInTimes.length-1])},m.prototype.handleViewOut=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 28005, 28152);m.super_.prototype.handleViewOut.apply(this,arguments),this.beaconData.pushInOuts("out",this.viewOutTimes[this.viewOutTimes.length-1])};var n=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 28159, 28241);this.data=new h(this.separators.rootKeySep,this.separators.rootValSep)};n.prototype.separators={rootKeySep:"_",rootValSep:"!,",arraySep:"|"},n.prototype.addItem=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 28331, 28439);var c=this.data.get(a);c||(c=new g(this.separators.arraySep),this.data.update(a,c)),c.push(b)},n.prototype.exports=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 28460, 28498);return this.data.exports()};var o=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 28505, 28726);j.apply(this,arguments),this.stateQueryTmpl=new this.BeaconQueryTemplateConstructor(this.stateQueryTmplDef),this.pageState=new i(this.convertPageStateKey()),this.updatePageState(b.getMaster().getElapsedTime())};return d.inherit(o,j),o.prototype.ViewableTargetConstructor=m,o.prototype.TargetDataSetConstructor=n,j.prototype.actions?o.prototype.actions=d.extend({},j.prototype.actions):o.prototype.actions={},o.prototype.actions.updatePageState={events:["viewPosChange"]},o.prototype.actions.stateBeaconThresholdMode={polling:2e3},o.prototype.actions.stateBeaconForceMode={events:["pageLeave"],polling:2e4},a.debug&&(o.prototype.actions.dumpStateData={polling:1e4}),o.prototype.scrollMainElement=null,o.prototype.getCurrentPageState=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 29248, 29496);var d,e;return this.scrollMainElement?(d=this.scrollMainElement.scrollLeft,e=this.scrollMainElement.scrollTop):(d=b.left,e=b.top),{screenWidth:b.width,screenHeight:b.height,scrollX:d,scrollY:e,pageWidth:c.width,pageHeight:c.height}},o.prototype.updatePageState=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 29525, 29688);var d=c&&c.rect?c.rect:e.getViewedRect(),f=e.getPageSize(),g=this.getCurrentPageState(a,d,f);this.pageState.newItem(a,this.convertPageStateKey(g))},o.prototype.convertPageStateKey=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 29721, 29814);var b={};return d.forEachHash(a,function(a,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 29765, 29805);b[this.pageStateKey[a]]=c},this),b},o.prototype.pageStateKey={screenWidth:"bw",screenHeight:"bh",pageWidth:"pw",pageHeight:"ph",scrollX:"sx",scrollY:"sy"},o.prototype.pageStateSeparators={sep1:":",sep2:"",sep3:",",sep4:";"},o.prototype.stateBeacon=function(a,b,c,e){___jdce_logger("lacuna_cache/imported_afb4gr.js", 30027, 30823);var f=[],g=0;d.forEach(this.targets,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 30081, 30154);var b=a.beaconData;b.hasDiff&&(g+=b.getDataSize(),f.push(a))},this);var h=this.pageState.calcDataSize(this.pageStateSeparators);g+=h;var i=e;if(e||(a<=this.stateBeaconEarlyTimeThreshold&&g>0?i=!0:g>this.stateBeaconDataSizeThreshold&&(i=!0)),i){var j=this.stateQueryTmpl.getInstance();if(f.length>0){var k=new this.TargetDataSetConstructor;d.forEach(f,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 30444, 30515);var b=a.beaconData,c=a.getGroupingId();k.addItem(c,b.data)},this),j.bind(this.stateBeaconDataKey,k.data)}h>0&&(j.bind(this.stateBeaconPageDataKey,this.pageState.serialize(this.pageStateSeparators),!0),this.pageState.shrink()),this.stateBeaconModifyQuery(a,b,c,j),this.beaconSender.sendString(j.exports()),d.forEach(f,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 30773, 30815);a.beaconData.clearAfterSent()},this)}},o.prototype.stateBeaconForceMode=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 30857, 30900);this.stateBeacon(a,b,c,!0)},o.prototype.stateBeaconThresholdMode=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 30938, 30981);this.stateBeacon(a,b,c,!1)},o.prototype.stateBeaconModifyQuery=function(a,b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 31017, 31036);},o.prototype.stateBeaconDataKey="state",o.prototype.stateBeaconPageDataKey="pageState",o.prototype.stateBeaconDataSizeThreshold=500,o.prototype.stateBeaconEarlyTimeThreshold=1e4,o.prototype.stateQueryTmplDef=[{name:"state",type:"var",key:"state"},{name:"pageState",type:"var",key:"pageState"}],o.prototype.dumpStateData=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 31356, 31729);var e={};d.forEach(this.targets,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 31404, 31508);var b=a.beaconData;if(b.hasDiff){var c=a.getGroupingId();e[c]||(e[c]=[]),e[c].push(b.data)}},this);var f="AD:"+d.formatObject(e,"$","!",null,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 31557, 31647);return d.map(a,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 31584, 31635);return decodeURIComponent(a.exports())}).join("|")});f+="PD:"+decodeURIComponent(this.pageState.serialize(this.pageStateSeparators))},{DeepViewableDetector:o,DeepViewableTarget:m,DeepTargetData:l,DeepTargetDataSet:n}}),c("main",["dev/flags","core/core","detector/simple_viewable_detector","detector/deep_viewable_detector"],function(a,b,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 31920, 32130);return{flags:a,CoreUtil:b.CoreUtil,DOMUtil:b.DOMUtil,Event:b.Event,BeaconSender:b.BeaconSender,BeaconQuery:b.BeaconQuery,getMaster:b.getMaster,SimpleViewableDetector:c,DeepViewableDetector:d}}),h._registerComponent("main","UADF",j)}(this),function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32177, 43615);"use strict";var c;try{c=a.top.YJ_UADF}catch(a){return}var d=c.initComponent("UADF","0.16.1");d&&function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32288, 43612);function b(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32299, 32342);return d.getMaster().baseTime}function e(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32342, 32393);return d.getMaster().getElapsedTime()}function f(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32393, 32487);var b=a.toString();return b.substring(0,b.length-3)+"."+b.substring(b.length-3)}var g=d.flags,h=d.CoreUtil,i=d.DOMUtil,j=d.BeaconQuery.HistoricalData,k=d.DeepViewableDetector.DeepViewableDetector,l=d.SimpleViewableDetector.SimpleViewableTarget,m=a.top,n=m.document,o=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32674, 33036);var b=a.getAttribute("data-ylk");if(!b)throw"YLKData: the 'data-ylk' attribute is not found";var c=a.getAttribute("data-rapid_p");if(!c)throw"YLKData: the 'data-rapid_p' attribute is not found";this.data={},h.forEach(b.split(";"),function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 32916, 33009);var b=a.split(":");if(2===b.length&&""!==b[0]){var c=b[0],d=b[1];this.data[c]=d}},this),c&&(this.data._p=c)};o.prototype.getULTKey=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 33059, 33191);var a="rsec:"+this.data.rsec+";slk:"+this.data.slk+";pos:"+this.data.pos;return this.data._p&&(a+=";_p:"+this.data._p),a};var p=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 33198, 33405);this.id=a,this.element=b,this.lastWidth=0,this.lastHeight=0,this.lastChildNums=0;var c=this;this.mutated=!1,b.addEventListener("DOMNodeInserted",function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 33357, 33381);c.mutated=!0},!1),this.updateState()};p.prototype.updateState=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 33430, 33738);if(this.mutated)return this.mutated=!1,!0;var a=!1,b=i.getElementRect(this.element),c=b.width;this.lastWidth!==c&&(this.lastWidth=c,a=!0);var d=b.height;this.lastHeight!==d&&(this.lastHeight=d,a=!0);var e=this.element.childNodes.length;return this.lastChildNums!==e&&(this.lastChildNums=e,a=!0),a};var q=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 33745, 34034);l.apply(this,arguments),this.viewInOuts=new j(["state"]),this.ylk=null,this.containerId=null,this.stateChangeCallback=null,this.stateChangeCallbackContext=null,this.instantBeaconFlag=b.instantBeaconFlag,this.instantBeaconFlag&&(this.VIEWED_TIME_CONDITION=b.viewContinueTime)};h.inherit(q,l),q.prototype.setYLKData=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 34073, 34096);this.ylk=a},q.prototype.getShortULTKey=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 34124, 34180);return this.containerId+":"+this.ylk.data._p},q.prototype.setStateChangeCallback=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 34216, 34291);this.stateChangeCallback=a,this.stateChangeCallbackContext=b},q.prototype.handleViewIn=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 34317, 34517);q.super_.prototype.handleViewIn.apply(this,arguments),this.viewInOuts.newItem(a,{state:"in"}),this.stateChangeCallback&&this.stateChangeCallback.call(this.stateChangeCallbackContext,this)},q.prototype.handleViewContinue=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 34549, 34854);var b=!!this.viewedEnoughTime;q.super_.prototype.handleViewContinue.apply(this,arguments);var c=!!this.viewedEnoughTime;this.instantBeaconFlag&&!b&&c&&(this.viewInOuts.newItem(a,{state:"continue"}),this.stateChangeCallback&&this.stateChangeCallback.call(this.stateChangeCallbackContext,this))},q.prototype.handleViewOut=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 34881, 35083);q.super_.prototype.handleViewOut.apply(this,arguments),this.viewInOuts.newItem(a,{state:"out"}),this.stateChangeCallback&&this.stateChangeCallback.call(this.stateChangeCallbackContext,this)};var r=function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 35090, 36156);if(!m.ULTPageParameter)throw"ULTPageParameter must be defined";if(!m.RappieStreamOptions)throw"RappieStreamOptions must be defined";if(!m.RappieStreamOptions.spaceid)throw"RappieStreamOptions.spaceid must be defined";if(!a.YAHOO||!YAHOO.i13n||!YAHOO.i13n.Rapid)throw"Rapid must be loaded";b.beacon&&(YAHOO.i13n.beacon_server=b.beacon),k.apply(this,arguments),this.changedModules=[],this.lastEventBeaconSent=0,this.pingBeaconIntervalSec=20,this.lastSentScreenSize={width:0,height:0},this.clickEventQueue=[],this.pageParams=m.ULTPageParameter||{},this.modifyPageParameter(),this.rappieStreamOptions=m.RappieStreamOptions,this.setupObservation();var c={spaceid:this.rappieStreamOptions.spaceid,yql_host:b.yql,apv:!1},d=m.RappieStreamOptions.webWorkerFile;if(d&&d.length>0?c.webworker_file=d:c.compr_on=!1,this.rappieStreamOptions.scrollMain){var e=n.getElementById(this.rappieStreamOptions.scrollMain);e&&(this.scrollMainElement=e)}this.rappieStreamOptions.rapidConfig&&(c=this.overrideRapidConfig(c,this.rappieStreamOptions.rapidConfig)),this.initRapid(c)};h.inherit(r,k),r.prototype.ViewableTargetConstructor=q,r.prototype.actions={observeContainers:{polling:200},updatePageState:{events:["viewPosChange"],minInterval:100},screenPosBeacon:{events:["pageLeave"],polling:5e3},moduleStateBeacon:{events:["pageLeave"],polling:5e3},pageViewStateBeacon:{events:["pageLeave"],polling:2e3},checkViewableStateStart:{events:["onLoad","viewPosChange"],polling:1e3,minInterval:100},checkViewableStateStep:{polling:50},procClickEventQueue:{polling:1e3}},-1!=navigator.userAgent.toLowerCase().indexOf("android")&&delete r.prototype.actions.pageViewStateBeacon,g.debug&&(r.prototype.actions.debugViewable={polling:2e3}),r.prototype.modifyPageParameter=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 36838, 36878);this.pageParams._rpv="1.9.0"},r.prototype.overrideRapidConfig=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 36911, 37153);return b.perf_navigationtime&&(a.perf_navigationtime=b.perf_navigationtime),b.sample&&(a.sample={},(b.sample.perf_navigationtime||0===b.sample.perf_navigationtime)&&(a.sample.perf_navigationtime=b.sample.perf_navigationtime)),a},r.prototype.initRapid=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37176, 37587);a.keys=this.pageParams;var b=[];this.rappieStreamOptions.mods&&h.forEach(this.rappieStreamOptions.mods,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37291, 37313);b.push(a)},this),this.rappieStreamOptions.varMods&&h.forEach(this.rappieStreamOptions.varMods,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37397, 37419);b.push(a)},this),b.length,this.rapid=new YAHOO.i13n.Rapid(a),this.rapid.addModules(b),h.forEach(b,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37507, 37580);var b=document.getElementById(a);b&&this.collectTargets(a,b)},this)},r.prototype.setupObservation=function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37617, 37774);this.rappieStreamOptions.varMods&&(this.observingContainers=[],h.forEach(this.rappieStreamOptions.varMods,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37734, 37766);this.setupVarMod(a)},this))},r.prototype.setupVarMod=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37799, 37901);var b=document.getElementById(a);if(b){var c=new p(a,b);this.observingContainers.push(c)}},r.prototype.observeContainers=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37932, 38088);h.forEach(this.observingContainers,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 37983, 38081);a.updateState()&&(this.rapid.refreshModule(a.id),this.collectTargets(a.id,a.element))},this)},r.prototype.collectTargets=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 38116, 38641);h.forEach(b.querySelectorAll("a[data-ylk],input[data-ylk],button[data-ylk]"),function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 38207, 38634);if(!b.__rappieData&&!this.isCollectedElem(b)){var c;try{c=new o(b)}catch(a){return}var d=parseInt(c.data._vimp,10),e=(1&d)>0,f=(2&d)>0,g=parseInt(c.data._vctime,10),h=this.VCTIME_DEFAULT;isNaN(g)||(h=g);var i={instantBeaconFlag:e,zeroSizeViewableMode:f,viewContinueTime:h},j=this.registerTarget(b,i);j&&(j.setYLKData(c),j.containerId=a,b.__rappieData=j,j.setStateChangeCallback(this.handleModuleStateChange,this))}},this)},r.prototype.sendRapidEventBeacon=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 38675, 38746);this.rapid.beaconEvent(b,c),this.lastEventBeaconSent=a},r.prototype.screenPosBeacon=function(a,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 38775, 39690);var e="",g=0,h=0,i=b();this.pageState.forEach(function(b,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 38837, 39281);var k=d[this.pageStateKey.scrollX]||0,l=d[this.pageStateKey.scrollY]||0;g=d[this.pageStateKey.screenWidth]||0,h=d[this.pageStateKey.screenHeight]||0;var m=f(b+i),n=g>h?"1":"0",o="#"+m+"@"+k+":"+l+"~"+n;if(e.length+o.length>=300){var p={scrnpos:e};j&&(p._sr=j),"pageLeave"===c&&(p._lev="1"),this.rappieStreamOptions.scrollMain&&(p.scrlele=this.rappieStreamOptions.scrollMain),this.sendRapidEventBeacon(a,"scrnpos",p),e=o}else e+=o},this);var j=null;if((0!==h&&h!==this.lastSentScreenSize.height||0!==g&&g!==this.lastSentScreenSize.width)&&(j=g+"x"+h,this.lastSentScreenSize.width=g,this.lastSentScreenSize.height=h),e.length>0){var k={scrnpos:e};j&&(k._sr=j),"pageLeave"===c&&(k._lev="1"),this.rappieStreamOptions.scrollMain&&(k.scrlele=this.rappieStreamOptions.scrollMain),this.sendRapidEventBeacon(a,"scrnpos",k),this.pageState.shrink()}},r.prototype.handleModuleStateChange=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 39727, 39827);this.changedModules.push(a),a.instantBeaconFlag&&(this.instantModuleBeaconScheduled=!0)},r.prototype.checkViewableStateStep=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 39863, 40381);if(this.instantModuleBeaconScheduled=!1,this.checkViewableStateInProgress){for(var d=c.rect?c.rect:i.getViewedRect(),e=this.checkViewableStateIndex+100,f=!1;this.checkViewableStateIndex<e;){var g=this.targets[this.checkViewableStateIndex];if(!g){f=!0;break}g.check(a,d),this.checkViewableStateIndex++}f&&(this.checkViewableStateIndex=0,this.checkViewableStateInProgress=!1),this.checkViewableState_InstantMode&&this.viewedBeacon(a,b,c),this.instantModuleBeaconScheduled&&this.moduleStateBeacon(a,b,c)}},r.prototype.moduleStateBeacon=function(a,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 40412, 40985);if(0!==this.changedModules.length){var e="pageLeave"===c,g="",i=b();if(h.forEach(this.changedModules,function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 40529, 40863);var c=b.getShortULTKey();b.viewInOuts.forEach(function(b,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 40587, 40834);if(d.state){var h;"in"===d.state?h="#":"out"===d.state?h="~":"continue"===d.state&&(h="!");var j="+"+c+h+f(b+i);if(g.length+j.length>=300){var k={viewtime:g};e&&(k._lev="1"),this.sendRapidEventBeacon(a,"l_viewtime",k),g=j}else g+=j}},this),b.viewInOuts.shrink()},this),g.length>0){var j={viewtime:g};e&&(j._lev="1"),this.sendRapidEventBeacon(a,"l_viewtime",j)}this.changedModules=[]}},r.prototype.pageViewStateBeacon=function(a,c,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 41018, 41326);var e=n.visibilityState||n.webkitVisiblityState;if(!e||"visible"===e){if("pageLeave"===c||a-this.lastEventBeaconSent>=1e3*this.pingBeaconIntervalSec){var g="#"+f(a+b()),h={viewtime:g,itvl:this.pingBeaconIntervalSec};"pageLeave"===c&&(h._lev="1"),this.sendRapidEventBeacon(a,"p_viewtime",h)}}},r.prototype.sendCustomEvent=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 41355, 41553);if(!a||0===a.length)throw"eventName must be specified";var d=c||{},f=e();if(b&&b.__rappieData){var g=b.__rappieData,h=g.getShortULTKey();d.ltarget=h}this.sendRapidEventBeacon(f,a,d)},r.prototype.sendClickEvent=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 41581, 41800);if(!a||!a.hasAttribute||!a.hasAttribute("data-ylk"))throw"srcElement must have 'data-ylk' attribute";this._sendClickEvent(a,b,c)||this.clickEventQueue.push({srcElement:a,data:b,queuedAt:e(),callback:c})},r.prototype.addModules=function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 41824, 42066);var c=[];h.isString(a)?c.push(a):h.isArray(a)&&(c=c.concat(a));var d=[];h.isString(b)?(c.push(b),d.push(b)):h.isArray(b)&&(c=c.concat(b),d=d.concat(b)),this.rapid.addModules(c),h.forEach(d,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42027, 42059);this.setupVarMod(a)},this)},r.prototype.setNewPageParameter=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42099, 42319);var b=!1,c={};if(h.forEachHash(a,function(a,d){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42144, 42228);this.pageParams.hasOwnProperty(a)||(c[a]=d,this.pageParams[a]=d,b=!0)},this),b){var d=this.rapid.getCurrentSID();this.rapid.setRapidAttribute({keys:a,A_sid:d})}},r.prototype._sendClickEvent=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42348, 42599);var d=a.__rappieData;if(!d)return!1;var e=d.ylk,f={};h.forEachHash(e.data,function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42438, 42459);f[a]=b},this),b&&h.forEachHash(b,function(a,b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42485, 42506);f[a]=b},this);var g=d.containerId;return this.rapid.beaconClick(g,e.data.slk,e.data._p,f,null,c),!0},r.prototype.procClickEventQueue=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42632, 42850);if(0!==this.clickEventQueue.length){var d=[];h.forEach(this.clickEventQueue,function(b){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42724, 42819);this._sendClickEvent(b.srcElement,b.data,b.callback)||a-b.queuedAt<=5e3&&d.push(b)},this),this.clickEventQueue=d}},r.prototype.getBeaconDataForTarget=function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42886, 42923);return a.ylk.getULTKey()},r.prototype.debugViewable=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42950, 43135);var d=h.filter(this.targets,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 42994, 43034);return a.isBeaconedTarget()},this),e=h.map(d,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43051, 43119);return a.setAsNotified(),this.getBeaconDataForTarget(a)},this);e.length},r.prototype.debugCollected=function(a,b,c){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43163, 43273);var d={};h.forEach(this.targets,function(a){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43211, 43266);var b=a.containerId;d[b]||(d[b]=0),d[b]+=1},this)};var s={};s={yql:"logql.yahoo.co.jp"};var t=new r(s);c.exportAPI("RappieStream",{sendCustomEvent:function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43370, 43418);t.sendCustomEvent.apply(t,arguments)},sendClickEvent:function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43434, 43481);t.sendClickEvent.apply(t,arguments)},addModules:function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43493, 43536);t.addModules.apply(t,arguments)},setNewPageParameter:function(){___jdce_logger("lacuna_cache/imported_afb4gr.js", 43557, 43609);t.setNewPageParameter.apply(t,arguments)}})}()}(this);var YAHOO=window.YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.anemos=YAHOO.JP.anemos||{},YAHOO.JP.anemos.UADF=YAHOO.JP.anemos.UADF||{},YAHOO.JP.anemos.UADF.RappieStream=YJ_UADF.RappieStream;