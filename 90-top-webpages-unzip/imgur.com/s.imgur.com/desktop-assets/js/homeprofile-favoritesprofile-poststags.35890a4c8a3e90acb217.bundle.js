(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"9DFJ":function(e,t,n){},CG6i:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("q1tI"),s=n.n(r),o=(n("17x9"),n("gmqy"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function i(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c(t=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?c(e):t}(this,(e=u(i)).call.apply(e,[this].concat(r)))),"element",null),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,s.a.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(i,[{key:"componentWillUnmount",value:function(){this.element&&this.element.removeAttribute("src")}},{key:"render",value:function(){var t=this,e=this.props,n=e.src,r=e.onLoad,o=e.onError,i=e.width,a=e.height;return s.a.createElement("img",{ref:function(e){t.element=e},src:n,style:{width:i,height:a},onLoad:r,onError:o})}}]),i}();t.b=Object(o.a)(i),i.__docgenInfo={description:"",methods:[],displayName:"PostImageComponent",props:{src:{type:{name:"string"},required:!1,description:""},height:{type:{name:"number"},required:!1,description:""},width:{type:{name:"number"},required:!1,description:""},onLoad:{type:{name:"func"},required:!1,description:""},onError:{type:{name:"func"},required:!1,description:""}}}},LbAz:function(e,t,n){},MQwj:function(e,t,n){},Uzvo:function(e,t,n){"use strict";var r=n("q1tI"),b=n.n(r),o=(n("17x9"),n("/MKj")),v=n("AoHe"),g=n("E9Wd"),P=n("+qLk");n("ZYtQ");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){c(t,e,n[e])})}return t}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(h){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,b.a.Component),function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(t,[{key:"render",value:function(){if(!h)return null;var e=this.props,t=e.post,n=e.height,r=e.width,o=e.viewGif,i=e.colorLoading,a=e.streamSection,s=e.streamParam;if(!t)return null;var l=Object(v.a)(t.toJS(),o),u={color:i,height:n},c=Object(v.b)(l,r,n),d=c.contentWidth,p=c.contentHeight,m=Object(v.e)(l.isAd,n,p,null!=l.title&&l.title.length),f="".concat(g.I).concat(function(e,t,n){return!e&&t&&n?"/".concat(t,"/").concat(n):e&&!e.get("in_gallery")||![P.E,P.r,P.C,P.s,P.t].includes(t)?t&&n?"/".concat(t,"/").concat(n):e&&e.get("isAlbum")?"/a":"":"/".concat(P.o)}(t,a,s),"/").concat(l.id),y=S({},this.props,{spinner:u,post:S({},l,{width:d,height:p,href:f}),styles:m});return b.a.createElement(h,E({className:"Post-item"},y))}}]),t}();return c(e,"defaultProps",{viewGif:!0}),e}function p(e,t){var n=e.posts,r=e.user,o=e.gallery,i=t.id;return{post:n.getIn(["posts",i]),isUserLoggedIn:r.get("isLoggedIn"),viewGif:o.get("viewGif")&&!o.get("pauseAnimation"),streamSection:o.get("streamSection"),streamParam:o.get("streamParam")}}n.d(t,"a",function(){return m});var m=function(e){return Object(o.b)(p)(d(e))}},VtCw:function(e,t,n){},ZYtQ:function(e,t,n){},cG8M:function(e,t,n){"use strict";var r=n("q1tI"),f=n.n(r),i=(n("17x9"),n("GB65")),u=n("wmRA"),y={PRESENT_PLAYING:"PRESENT_PLAYING",PRESENT_PAUSED:"PRESENT_PAUSED"},h={PRESENT_ON:"PRESENT_ON",PRESENT_MUTED:"PRESENT_MUTED"},o=n("gmqy"),c=n("CG6i"),a=n("TSYQ"),b=n.n(a);n("qhsG");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(p(o=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}(this,d(t).call(this,e))),"movementStartPos",0),v(p(o),"volumeStart",0),v(p(o),"stateIndicator",f.a.createRef()),v(p(o),"time",f.a.createRef()),v(p(o),"scrubber",f.a.createRef()),v(p(o),"bar",f.a.createRef()),v(p(o),"audioIndicator",f.a.createRef()),v(p(o),"volume",f.a.createRef()),v(p(o),"updateDimensionsFromScrubber",function(){var e=o.scrubber.current.offsetWidth;e||(e=1),o.updateDimensions(e,o.scrubber.current.getBoundingClientRect().left)}),v(p(o),"handleMouseDown",function(){Object(i.c)("mouseup",o.handleMouseUp),Object(i.c)("mousemove",o.handleMouseMove),Object(i.v)("body").style.userSelect="none",o.setState({dragging:!0})}),v(p(o),"handleMouseUp",function(){Object(i.ab)("mouseup",o.handleMouseUp),Object(i.ab)("mousemove",o.handleMouseMove),Object(i.v)("body").style.userSelect="auto";var e=o.props.onTimeChange(o.state.playedPercentModifier);o.setState({scrubPauseWait:e,dragging:!1})}),v(p(o),"handleMouseMove",function(e){o.props.onScrubbing();var t=o.movementStartPos,n=o.state.scrubberWidth;o.setState({playedPercentModifier:o.getPlayedPercentModifier(e.pageX,t,n)})}),v(p(o),"handleMouseDownVolume",function(){Object(i.c)("mouseup",o.handleMouseUpVolume),Object(i.c)("mousemove",o.handleMouseMoveVolume),Object(i.v)("body").style.userSelect="none",o.volumeStart=o.volume.current.getBoundingClientRect().left}),v(p(o),"handleMouseUpVolume",function(e){Object(i.ab)("mouseup",o.handleMouseUpVolume),Object(i.ab)("mousemove",o.handleMouseMoveVolume),Object(i.v)("body").style.userSelect="auto",o.setVolumeFromCoordinates(e.pageX)}),v(p(o),"handleMouseMoveVolume",function(e){o.setVolumeFromCoordinates(e.pageX)}),v(p(o),"handleScrubberBarClick",function(e){var t=o.movementStartPos,n=o.state.scrubberWidth,r=o.getPlayedPercentModifier(e.pageX,t,n);o.props.onTimeChange(r)}),o.state={scrubPauseWait:0,playedPercentModifier:null,scrubberWidth:1,dragging:!1,volume:e.volume},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,f.a.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentDidMount",value:function(){var t=this;this.updateDimensionsFromScrubber(),Object(i.c)("resize",this.updateDimensionsFromScrubber),["mozfullscreenchange","webkitfullscreenchange","fullscreenchange"].forEach(function(e){return Object(i.a)(e,t.updateDimensionsFromScrubber)})}},{key:"componentWillUnmount",value:function(){var t=this;Object(i.ab)("resize",this.updateDimensionsFromScrubber),["mozfullscreenchange","webkitfullscreenchange","fullscreenchange"].forEach(function(e){return Object(i.X)(e,t.updateDimensionsFromScrubber)})}},{key:"updateDimensions",value:function(e,t){this.setState({scrubberWidth:e}),this.movementStartPos=t}},{key:"componentWillReceiveProps",value:function(e){null!==this.state.playedPercentModifier&&e.playedPercent>this.state.scrubPauseWait&&this.setState({scrubPauseWait:0,playedPercentModifier:null})}},{key:"setVolumeFromCoordinates",value:function(e){var t=1-Math.min(Math.max((this.volumeStart+104+Object(i.z)("scrollX")-e)/104,0),1);this.props.onVolumeChange(t),this.setState({volume:t})}},{key:"getPlayedPercentModifier",value:function(e,t,n){var r=(e-t)/n;return r<0?0:1<r?1:r}},{key:"pad",value:function(e){var t=e.toString();return t.length<2&&(t="0".concat(t)),t}},{key:"slide",value:function(e,t){e=Math.max(Math.min(100*e/t,100),1);for(var n=[[0,[27,183,110]],[44,[58,221,214]],[100,[123,133,247]]],r=[],o=0;o<n.length;o++)if(e<=n[o][0]){r=[o-1,o];break}var i=n[r[0]][1],a=n[r[1]][1],s=n[r[0]][0],l=(e-s)/(n[r[1]][0]-s);return this.pickRgb(a,i,l).join()}},{key:"pickRgb",value:function(e,t,n){var r=((2*n-1)/1+1)/2,o=1-r;return[Math.round(e[0]*r+t[0]*o),Math.round(e[1]*r+t[1]*o),Math.round(e[2]*r+t[2]*o)]}},{key:"render",value:function(){var e=this,t=this.props.playedPercent;null!==this.state.playedPercentModifier&&(t=this.state.playedPercentModifier);var n=this.state.scrubberWidth*t,r=-1*n,o=(n+=5)-25,i=Math.floor(this.props.duration-this.props.time),a="".concat(n,"px"),s=this.props.playState===y.PRESENT_PLAYING?"playing":"paused",l=this.slide(n,this.state.scrubberWidth),u="0 0 10px 0 rgb(".concat(l,"), 0 2px 4px 0 rgba(0, 0, 0, 0.5), 0 2px 4px 0 rgba(0, 0, 0, 0.5), 0 0px 20px 0 rgb(").concat(l,")"),c=this.props.audioState===h.PRESENT_MUTED?"mute":"on",d=b()({"PostVideoControls-fullscreen":!0,fullscreen:this.props.fullscreen}),p=this.props.audioState===h.PRESENT_MUTED?0:104*this.state.volume,m=p;return f.a.createElement("div",{className:"PostVideoControls"},f.a.createElement("div",{className:"PostVideoControls-container"},f.a.createElement("span",{onClick:this.props.onPlayToggle,className:"PostVideoControls-state"},f.a.createElement("span",{ref:this.stateIndicator,className:"PostVideoControls-state-indicator PostVideoControls-state-indicator-".concat(s)}," ")),f.a.createElement("span",{ref:this.time,className:"PostVideoControls-time"},Math.floor(i/60),":",this.pad(i%60)),f.a.createElement("span",{ref:this.scrubber,className:"PostVideoControls-scrubber",onClick:this.handleScrubberBarClick},f.a.createElement("div",{className:"PostVideoControls-scrubber-backdrop"}," "),f.a.createElement("div",{ref:this.bar,className:"PostVideoControls-scrubber-bar",style:{width:a}},f.a.createElement("style",null,"\n                                .PostVideoControls-scrubber-bar::after{\n                                    width: ".concat(this.state.scrubberWidth,"px;\n                                }\n                                .PostVideoControls-scrubber-knob-extender {\n                                    background: rgb(").concat(l,")\n                                }\n\n                            "))),f.a.createElement("div",{className:"PostVideoControls-scrubber-buffer",style:{left:a}}),this.state.dragging&&f.a.createElement("div",{className:"PostVideoControls-knob-extender-container"},f.a.createElement("div",{className:"PostVideoControls-scrubber-knob-extender PostVideoControls-scrubber-knob-extender-top",style:{left:o}},f.a.createElement("div",{className:"PostVideoControls-scrubber-knob-bg",style:{left:r}})),f.a.createElement("div",{className:"PostVideoControls-scrubber-knob-extender PostVideoControls-scrubber-knob-extender-bottom",style:{left:o}},f.a.createElement("div",{className:"PostVideoControls-scrubber-knob-bg",style:{left:r}}))),f.a.createElement("div",{className:"PostVideoControls-scrubber-knob",style:{left:a,background:"rgb(".concat(l,")"),boxShadow:u},onMouseDown:this.handleMouseDown},f.a.createElement("div",{className:"PostVideoControls-scrubber-knob-bg",style:{left:r}}))),this.props.toggleFullscreen&&f.a.createElement("span",{onClick:function(){return e.props.toggleFullscreen(!0)},className:d}," ")),this.props.hasAudio?f.a.createElement("span",{className:"PostVideoControls-audio-container"},f.a.createElement("span",{ref:this.audioIndicator,onClick:this.props.onAudioToggle,className:"PostVideoControls-audio PostVideoControls-audio-".concat(c)}),f.a.createElement("div",{className:"PostVideoControls-volume",ref:this.volume,onMouseDown:this.handleMouseDownVolume},f.a.createElement("div",{className:"PostVideoControls-volume-fill",style:{width:p}}),f.a.createElement("div",{className:"PostVideoControls-volume-knob",style:{left:m}}))):"")}}]),t}();g.defaultProps={volume:.5};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g.__docgenInfo={description:"",methods:[{name:"updateDimensionsFromScrubber",docblock:null,modifiers:[],params:[],returns:null},{name:"updateDimensions",docblock:null,modifiers:[],params:[{name:"scrubberWidth",type:null},{name:"movementStartPos",type:null}],returns:null},{name:"handleMouseDown",docblock:null,modifiers:[],params:[],returns:null},{name:"handleMouseUp",docblock:null,modifiers:[],params:[],returns:null},{name:"handleMouseMove",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleMouseDownVolume",docblock:null,modifiers:[],params:[],returns:null},{name:"handleMouseUpVolume",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleMouseMoveVolume",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"setVolumeFromCoordinates",docblock:null,modifiers:[],params:[{name:"x",type:null}],returns:null},{name:"handleScrubberBarClick",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"getPlayedPercentModifier",docblock:null,modifiers:[],params:[{name:"xPos",type:null},{name:"start",type:null},{name:"width",type:null}],returns:null},{name:"pad",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"slide",docblock:null,modifiers:[],params:[{name:"position",type:null},{name:"sliderWidth",type:null}],returns:null},{name:"pickRgb",docblock:null,modifiers:[],params:[{name:"color1",type:null},{name:"color2",type:null},{name:"weight",type:null}],returns:null}],displayName:"PostVideoControlsComponent",props:{volume:{defaultValue:{value:"DEFAULT_VOLUME",computed:!0},type:{name:"number"},required:!1,description:""},playedPercent:{type:{name:"number"},required:!1,description:""},time:{type:{name:"number"},required:!1,description:""},onScrubbing:{type:{name:"func"},required:!0,description:""},duration:{type:{name:"number"},required:!1,description:""},onTimeChange:{type:{name:"func"},required:!0,description:""},onVolumeChange:{type:{name:"func"},required:!0,description:""},audioState:{type:{name:"string"},required:!1,description:""},onAudioToggle:{type:{name:"func"},required:!0,description:""},playState:{type:{name:"string"},required:!1,description:""},onPlayToggle:{type:{name:"func"},required:!0,description:""},onSeek:{type:{name:"func"},required:!0,description:""},fullscreen:{type:{name:"bool"},required:!1,description:""},toggleFullscreen:{type:{name:"func"},required:!0,description:""},hasAudio:{type:{name:"bool"},required:!1,description:""}}},n.d(t,"a",function(){return V});var V=function(e){function r(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),k(w(n=function(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?w(e):t}(this,O(r).call(this,e))),"imageLoaded",!1),k(w(n),"unmount",!1),k(w(n),"timeStarted",-1),k(w(n),"timePlayed",0),k(w(n),"duration",0),k(w(n),"soundWasEverEnabled",!1),k(w(n),"videoContainer",f.a.createRef()),k(w(n),"srcmp4",f.a.createRef()),k(w(n),"video",f.a.createRef()),k(w(n),"isVideoElementUnavailable",function(){return n.unmount||!n.video.current}),k(w(n),"handlerLoad",function(e){n.imageLoaded=!0,n.props.onLoad&&n.props.onLoad(e)}),k(w(n),"onPlayToggle",function(){n.isVideoElementUnavailable()||(n.video.current.paused?n.play():n.pause())}),k(w(n),"onAudioToggle",function(){if(!n.isVideoElementUnavailable()){var e=n.state.audioState===h.PRESENT_ON,t=e?h.PRESENT_MUTED:h.PRESENT_ON;n.video.current.muted=e,n.setState({audioState:t},function(){!e&&n.props.hash&&n.handleGlobalUnmute(n.props.hash)}),n.soundWasEverEnabled||(n.soundWasEverEnabled=!e)}}),k(w(n),"onScrubbing",function(){if(!n.isVideoElementUnavailable()){var e=n.video.current;e.paused||e.pause()}}),k(w(n),"onTimeChange",function(e){if(!n.isVideoElementUnavailable()){var t=n.video.current;return t.currentTime=t.duration*e,n.isPlaying()&&n.play(),t.currentTime/t.duration}}),k(w(n),"onVolumeChange",function(e){n.isVideoElementUnavailable()||(n.video.current.volume=e,n.setState({audioState:h.PRESENT_ON,volume:e},function(){0<e&&n.props.hash&&n.handleGlobalUnmute(n.props.hash)}))}),k(w(n),"handleTimeUpdate",function(e){n.isVideoElementUnavailable()||(n.videoInterval(e),n.state.progressVisible&&n.setState({playedPercent:n.video.current.currentTime/n.video.current.duration,currentTime:Math.floor(n.video.current.currentTime)}))}),k(w(n),"handleMetadata",function(){n.isVideoElementUnavailable()||(n.video.current.currentTime=n.state.currentTime,n.setState({playedPercent:n.state.currentTime/n.video.current.duration,duration:Math.floor(n.video.current.duration)}))}),k(w(n),"handleData",function(e){if(!n.isVideoElementUnavailable()){var t=!1;void 0!==e.target.webkitAudioDecodedByteCount&&0<e.target.webkitAudioDecodedByteCount?t=!0:void 0!==e.target.mozHasAudio&&e.target.mozHasAudio?t=!0:void 0!==e.target.audioTracks&&0<e.target.audioTracks.length&&(t=!0),n.video.current.volume=n.state.volume,n.setState({playedPercent:n.state.currentTime/n.video.current.duration,duration:Math.floor(n.video.current.duration),hasAudio:t})}}),k(w(n),"handleCanPlay",function(e){n.isVideoElementUnavailable()||n.isPaused()||(1!==n.video.current.readyState&&4!==n.video.current.readyState||n.play(),n.props.handleCanPlay(e))}),k(w(n),"handleVideoSourceError",function(){!n.video.current||0!==n.video.current.readyState&&3!==n.video.current.networkState||n.setState({isError:!0})}),k(w(n),"toggleFullscreen",function(e){n.isVideoElementUnavailable()||(Object(i.v)("body").mozRequestFullScreen||Object(i.v)("body").webkitRequestFullScreen||Object(i.v)("body").requestFullScreen)&&(n.state.fullscreen||!1===e?(Object(i.nb)(),Object(i.v)("body").classList.remove("video-hidden-body"),n.setState({fullscreen:!1})):(n.videoContainer.current&&Object(i.ob)(n.videoContainer.current),Object(i.v)("body").classList.add("video-hidden-body"),n.setState({fullscreen:!0})))}),k(w(n),"videoStartedPlaying",function(){n.setState({playState:y.PRESENT_PLAYING}),n.props.promoted&&(n.timeStarted=(new Date).getTime()/1e3)}),k(w(n),"videoInterval",function(e){if(!n.isVideoElementUnavailable()&&n.props.promoted&&!n.video.current.paused&&n.props.controls&&n.state.duration){if(0<n.timeStarted){var t=(new Date).getTime()/1e3-n.timeStarted;n.timeStarted=-1,n.timePlayed+=t}"timeupdate"===e.type&&(n.timeStarted=(new Date).getTime()/1e3)}}),k(w(n),"handleSeek",function(e){n.isVideoElementUnavailable()||(n.video.current.currentTime=e)}),k(w(n),"handleMouseOver",function(){n.setState({progressVisible:!0})}),k(w(n),"handleMouseOut",function(){n.setState({progressVisible:!1})});var t=e.playAudioIfAvailable?h.PRESENT_ON:h.PRESENT_MUTED;return e.playState===y.PRESENT_PAUSED&&e.audioState&&(t=e.audioState),n.state={playedPercent:0,playState:e.playVideo?y.PRESENT_PLAYING:y.PRESENT_PAUSED,currentTime:e.currentTime||0,duration:0,fullscreen:!1,hasAudio:!1,progressVisible:!1,audioState:t,isError:!1,volume:e.volume||n.getVolumePreference()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,f.a.Component),function(e,t,n){t&&S(e.prototype,t),n&&S(e,n)}(r,[{key:"componentWillUnmount",value:function(){this.unmount=!0,this.srcmp4.current&&this.srcmp4.current.removeAttribute("src"),this.video.current&&this.video.current.load()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.playVideo;e.playVideo!==t&&(t&&this.pause(),e.playVideo&&this.play())}},{key:"componentDidMount",value:function(){var e=this,t=function(){Object(i.v)("mozFullScreen")||Object(i.v)("webkitIsFullScreen")||Object(i.v)("fullscreen")||e.toggleFullscreen(!1)};this.srcmp4.current&&(this.srcmp4.current.onerror=this.handleVideoSourceError),["mozfullscreenchange","webkitfullscreenchange","fullscreenchange"].forEach(function(e){return Object(i.a)(e,t)})}},{key:"handleGlobalUnmute",value:function(e){e===this.props.hash||this.unmount||this.setState({audioState:h.PRESENT_MUTED})}},{key:"getVolumePreference",value:function(){return.5}},{key:"play",value:function(){var e=this;if(!this.isVideoElementUnavailable()){var t=this.video.current.play();void 0!==t?t.then(function(){e.setState({playState:y.PRESENT_PLAYING})}).catch(function(){e.setState({playState:y.PRESENT_PAUSED})}):this.setState({playState:y.PRESENT_PLAYING})}}},{key:"pause",value:function(){this.isVideoElementUnavailable()||(this.video.current.pause(),this.setState({playState:y.PRESENT_PAUSED}))}},{key:"isPlaying",value:function(){return this.state.playState===y.PRESENT_PLAYING}},{key:"isPaused",value:function(){return this.state.playState===y.PRESENT_PAUSED}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.onError,o=e.animationType,i=e.playVideo,a=e.src,s=i?a.video:a.image;if(o!==u.l||!this.imageLoaded)return f.a.createElement(c.a,{src:o!==u.n?a.image:s,height:n,width:t,onError:r,onLoad:this.handlerLoad});if(this.state.isError)return this.props.fallbackMedia(this.props.src);var l={key:this.props.hash,style:{maxWidth:this.props.width,minHeight:this.props.height,maxHeight:this.props.height},draggable:!1,muted:!0,playsInline:"playsInline",controls:!1};return this.state.audioState===h.PRESENT_MUTED&&(l.muted=!0),this.isPlaying()?l.autoPlay="autoplay":l.preload="metadata",o===u.l&&(l.loop="loop"),a.image&&(l.poster=a.image),this.props.dataURL&&(l["data-url"]=this.props.dataURL),f.a.createElement("div",{className:"PostVideo".concat(this.state.fullscreen?" fullscreen":""),ref:this.videoContainer,onMouseOver:this.handleMouseOver,onFocus:this.handleMouseOver,onMouseOut:this.handleMouseOut,onBlur:this.handleMouseOut},this.props.controls&&this.isPaused()&&f.a.createElement("span",{title:"Play video",className:"video-play pointer",onClick:this.onPlayToggle}),f.a.createElement("div",{className:"PostVideo-video-wrapper"},f.a.createElement("video",E({},l,{onPlay:this.videoStartedPlaying,onPlaying:this.videoStartedPlaying,onEnded:this.videoInterval,onPause:this.videoInterval,onTimeUpdate:this.handleTimeUpdate,onLoadedMetadata:this.handleMetadata,onLoadedData:this.handleData,onCanPlay:this.handleCanPlay,className:this.state.fullscreen?"fullscreen":this.props.classNames,ref:this.video}),f.a.createElement("source",{ref:this.srcmp4,type:"video/mp4",src:a.video}))),this.props.controls&&f.a.createElement(g,{playedPercent:this.state.playedPercent,time:this.state.currentTime,onScrubbing:this.onScrubbing,duration:this.state.duration,onTimeChange:this.onTimeChange,onVolumeChange:this.onVolumeChange,audioState:this.state.audioState,onAudioToggle:this.onAudioToggle,playState:this.state.playState,onPlayToggle:this.onPlayToggle,onSeek:this.handleSeek,fullscreen:this.state.fullscreen,toggleFullscreen:this.toggleFullscreen,hasAudio:this.state.hasAudio,volume:this.state.volume}))}}]),r}();V.defaultProps={animationType:u.l,controls:!1,src:{image:"",video:""},playAudioIfAvailable:!0,playState:y.PRESENT_PAUSED,audioState:h.PRESENT_MUTED,currentTime:0,volume:.5,handleCanPlay:function(){},fallbackMedia:function(e){return f.a.createElement("img",{src:e,"data-url":e})},dataUrl:"",promoted:!1,classNames:"",playVideo:!0};t.b=Object(o.a)(V);V.__docgenInfo={description:"",methods:[{name:"isVideoElementUnavailable",docblock:null,modifiers:[],params:[],returns:null},{name:"handlerLoad",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleGlobalUnmute",docblock:null,modifiers:[],params:[{name:"hash",type:null}],returns:null},{name:"onPlayToggle",docblock:null,modifiers:[],params:[],returns:null},{name:"onAudioToggle",docblock:null,modifiers:[],params:[],returns:null},{name:"onScrubbing",docblock:null,modifiers:[],params:[],returns:null},{name:"onTimeChange",docblock:null,modifiers:[],params:[{name:"offset",type:null}],returns:null},{name:"getVolumePreference",docblock:null,modifiers:[],params:[],returns:null},{name:"onVolumeChange",docblock:null,modifiers:[],params:[{name:"volume",type:null}],returns:null},{name:"handleTimeUpdate",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleMetadata",docblock:null,modifiers:[],params:[],returns:null},{name:"handleData",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleCanPlay",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleVideoSourceError",docblock:null,modifiers:[],params:[],returns:null},{name:"play",docblock:null,modifiers:[],params:[],returns:null},{name:"pause",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleFullscreen",docblock:null,modifiers:[],params:[{name:"state",type:null}],returns:null},{name:"videoStartedPlaying",docblock:null,modifiers:[],params:[],returns:null},{name:"videoInterval",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleSeek",docblock:null,modifiers:[],params:[{name:"time",type:null}],returns:null},{name:"handleMouseOver",docblock:null,modifiers:[],params:[],returns:null},{name:"handleMouseOut",docblock:null,modifiers:[],params:[],returns:null},{name:"isPlaying",docblock:null,modifiers:[],params:[],returns:null},{name:"isPaused",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PostVideoComponent",props:{animationType:{defaultValue:{value:"POST_LOOP",computed:!0},type:{name:"number"},required:!1,description:""},controls:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},src:{defaultValue:{value:"{\n    image: '',\n    video: '',\n}",computed:!1},type:{name:"shape",value:{image:{name:"string",required:!1},video:{name:"string",required:!1}}},required:!1,description:""},playAudioIfAvailable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},playState:{defaultValue:{value:"VIDEO_CONTROLS.PLAY_STATE.PRESENT_PAUSED",computed:!0},type:{name:"string"},required:!1,description:""},audioState:{defaultValue:{value:"VIDEO_CONTROLS.AUDIO_STATE.PRESENT_MUTED",computed:!0},type:{name:"string"},required:!1,description:""},currentTime:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},volume:{defaultValue:{value:"DEFAULT_VOLUME",computed:!0},type:{name:"number"},required:!1,description:""},handleCanPlay:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},fallbackMedia:{defaultValue:{value:"src => (<img src={src} data-url={src} />)",computed:!1},type:{name:"func"},required:!1,description:""},dataUrl:{defaultValue:{value:"''",computed:!1},required:!1},promoted:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},classNames:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},playVideo:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},height:{type:{name:"number"},required:!1,description:""},width:{type:{name:"number"},required:!1,description:""},onLoad:{type:{name:"func"},required:!1,description:""},onError:{type:{name:"func"},required:!1,description:""},hash:{type:{name:"string"},required:!1,description:""},dataURL:{type:{name:"string"},required:!1,description:""}}}},"ega+":function(e,t,n){"use strict";var r=n("q1tI"),T=n.n(r),o=n("sEfC"),i=n.n(o),a=(n("17x9"),n("/MKj")),s=n("TSYQ"),N=n.n(s),C=n("wmRA"),l=n("Bw9V"),u=n("ErBw"),c=n("Uzvo"),d=n("GB65");var p=n("G5ih");n("VtCw");function m(e){for(var t=e.points,n=e.radius,r=360/t*Math.PI/180,o=[],i=0;i<t;i++)o.push({cx:16+(16-n)*Math.cos(r*i),cy:16+(16-n)*Math.sin(r*i)});return T.a.createElement("span",{className:"FireworkAnimate"},T.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(32," ").concat(32)},o.map(function(e,t){return T.a.createElement("circle",{key:"point-".concat(t),cx:e.cx,cy:e.cy,r:n})})))}m.defaultProps={points:8,radius:2},m.__docgenInfo={description:"",methods:[],displayName:"FireworkAnimate",props:{points:{defaultValue:{value:"8",computed:!1},type:{name:"number"},required:!1,description:""},radius:{defaultValue:{value:"2",computed:!1},type:{name:"number"},required:!1,description:""}}};var f=n("pNV7");n("wMLv");function q(e){var t=e.onVote,n=e.value.toLocaleString();return T.a.createElement("div",{className:"PostInfo vote downs uScaleTransition",onClick:t},T.a.createElement("span",{className:"icon icon-downvote-fill"}),T.a.createElement("span",null,n))}function M(e){var t=e.onVote,n=e.value,r=e.isVoted,o=n.toLocaleString();return T.a.createElement("div",{className:"PostInfo vote ups uScaleTransition",onClick:t},T.a.createElement("span",{className:"icon icon-upvote-fill"},r&&T.a.createElement(m,null)),T.a.createElement("span",null,o))}function I(e){var t=e.value,n=t.toLocaleString();return Math.trunc(t/1e3)&&(n=Object(p.a)("lotComments")),T.a.createElement("div",{className:"PostInfo uScaleTransition"},T.a.createElement("span",{className:"icon ".concat(f.e)},T.a.createElement(f.H,{name:f.e})),T.a.createElement("span",null,n))}function y(e){var t=e.value,n=e.className,r=t.toLocaleString();return Math.trunc(t/1e3)&&(r=Math.round(t/1e3,1)+Object(p.a)("viewsK")),Math.trunc(t/1e6)&&(r=Math.round(t/1e6,1)+Object(p.a)("viewsM")),T.a.createElement("div",{className:"PostInfo uScaleTransition views ".concat(n)},T.a.createElement("span",{className:"icon ".concat(f.l)},T.a.createElement(f.H,{name:f.l})),T.a.createElement("span",null,r))}function h(e){var t=e.text;return T.a.createElement("div",{className:"PostInfo label"},t)}function b(e){var t=e.text,n=e.lines,r=e.fontSize,o=e.lineHeight;return T.a.createElement("span",{style:function(e,t,n){return{display:"-webkit-box",maxHeight:e*t*n,overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:e}}(n,r,o)},t)}M.defaultProps={isVoted:!1},M.__docgenInfo={description:"",methods:[],displayName:"PostVoteUp",props:{isVoted:{defaultValue:{value:"false",computed:!(q.__docgenInfo={description:"",methods:[],displayName:"PostVoteDown",props:{onVote:{type:{name:"func"},required:!(y.defaultProps={className:""}),description:""},value:{type:{name:"number"},required:!0,description:""}}})},type:{name:"bool"},required:!1,description:""},onVote:{type:{name:"func"},required:!1,description:""},value:{type:{name:"number"},required:!0,description:""}}},y.__docgenInfo={description:"",methods:[],displayName:"PostViews",props:{className:{defaultValue:{value:"''",computed:!(I.__docgenInfo={description:"",methods:[],displayName:"PostComments",props:{value:{type:{name:"number"},required:!0,description:""}}})},type:{name:"string"},required:!1,description:""},value:{type:{name:"number"},required:!0,description:""}}},h.__docgenInfo={description:"",methods:[],displayName:"PostLabel",props:{text:{type:{name:"string"},required:!0,description:""}}},b.__docgenInfo={description:"",methods:[],displayName:"TruncatedText",props:{text:{type:{name:"string"},required:!0,description:""},lines:{type:{name:"number"},required:!0,description:""},fontSize:{type:{name:"number"},required:!0,description:""},lineHeight:{type:{name:"number"},required:!0,description:""}}};n("yQno");function U(e){var t=e.title,n=e.children,r=e.isNotAd,o=e.privacy,i=e.className,a=e.views;if(!r&&!t)return null;var s=-1===[C.o,C.j].indexOf(o),l=N()(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({"Post-item-title-wrap":!0},i,i));return T.a.createElement("div",{className:l},T.a.createElement("div",{className:"Post-item-title"},T.a.createElement(b,{lines:2,fontSize:14,lineHeight:1.14,text:t})),T.a.createElement("div",{className:"Post-item-info"},s&&r&&n,o===C.o&&T.a.createElement(h,{text:Object(p.a)("postPrivate")}),o===C.j&&T.a.createElement(h,{text:Object(p.a)("postHidden")}),r&&1<=a&&T.a.createElement(y,{value:a,className:o===C.j?"hidden":""})))}U.defaultProps={className:"",privacy:C.p},U.__docgenInfo={description:"",methods:[],displayName:"Title",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},privacy:{defaultValue:{value:"POST_PUBLIC",computed:!0},type:{name:"string"},required:!1,description:""},title:{type:{name:"string"},required:!0,description:""},children:{type:{name:"array"},required:!1,description:""},isNotAd:{type:{name:"bool"},required:!0,description:""},views:{type:{name:"number"},required:!0,description:""}}};n("MQwj");var v=T.a.createElement("svg",{className:"Grid-ad-arrow",width:"10px",height:"10px",viewBox:"0 -2 7 8"},T.a.createElement("g",{id:"Ad-UX",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},T.a.createElement("g",{transform:"translate(-1067.000000, -405.000000)",fill:"#2C2F34"},T.a.createElement("g",{transform:"translate(1066.000000, 405.000000)"},T.a.createElement("g",{id:"Layer_1"},T.a.createElement("rect",{id:"Rectangle-path",transform:"translate(3.602175, 3.397824) rotate(225.000000) translate(-3.602175, -3.397824) ",x:"2.85931752",y:"0.426395641",width:"1.48571433",height:"5.9428573"}),T.a.createElement("polygon",{id:"Shape",points:"6.97142857 5.22857143 5.48571429 5.22857143 5.48571429 1.51428571 1.77142857 1.51428571 1.77142857 0.0285714286 6.97142857 0.0285714286"}))))));function g(e){var t=e.isThumbnailAd,n=e.isPromotedAd,r=e.imagesCount,o=e.metaLabel;return T.a.createElement("div",{className:"Post-item-meta"},o&&T.a.createElement("div",{className:"Post-item-image-video"},o),n&&T.a.createElement("div",{className:"Post-item-external-ad"},Object(p.a)("promotedText")),t&&T.a.createElement("div",{className:"Post-item-external-ad"},"ad ",v),!t&&!n&&1<r&&T.a.createElement("div",{className:"Post-item-image-count"},r.toLocaleString()))}var R=g;g.__docgenInfo={description:"",methods:[],displayName:"Meta",props:{isThumbnailAd:{type:{name:"bool"},required:!1,description:""},isPromotedAd:{type:{name:"bool"},required:!1,description:""},imagesCount:{type:{name:"number"},required:!1,description:""},metaLabel:{type:{name:"string"},required:!1,description:""}}};var D=n("cG8M"),L=n("CG6i"),P=n("55Ip");function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function O(e){var t=e.innerRef,n=e.to,r=e.isLoggedIn,o=e.isPostPageBeta,i=e.children,a=(e.dispatch,S(e,["innerRef","to","isLoggedIn","isPostPageBeta","children","dispatch"]));return!r&&o?T.a.createElement(P.a,E({draggable:"false",to:Object(d.Y)(n),ref:t},a),i):T.a.createElement("a",E({draggable:"false",href:n,ref:t},a),i)}var A=Object(a.b)(function(e){var t=e.user;return{isLoggedIn:t.get("isLoggedIn"),isPostPageBeta:t.get("flags").get("desktopPostPageBeta")}})(O);O.__docgenInfo={description:"",methods:[],displayName:"PostLinkComponent",props:{innerRef:{type:{name:"object"},required:!1,description:""},to:{type:{name:"string"},required:!0,description:""},isLoggedIn:{type:{name:"bool"},required:!1,description:""},isPostPageBeta:{type:{name:"bool"},required:!1,description:""},children:{type:{name:"node"},required:!0,description:""},dispatch:{type:{name:"func"},required:!0,description:""}}};n("ZYtQ");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return G}),n.d(t,"b",function(){return W});var G=function(e){function t(e){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(V(s=function(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?V(e):t}(this,k(t).call(this,e))),"isVoteHandler",!1),x(V(s),"getVoteHandler",function(a){return function(e){var t=s.props,n=t.post,r=t.isUserLoggedIn,o=t.onGalleryImageVote;if(!r||!o)return!0;e.preventDefault();var i=n.vote;if(s.isVoteHandler=!0,i===a)return o(n.id,C.s);o(n.id,a)}}),x(V(s),"handlerSaveGalleryPage",function(){var e=s.props,t=e.onSaveGalleryPage,n=e.post;if(!t)return!0;t(n.galleryPage)}),x(V(s),"clickHandler",function(){s.props.post.isAd&&s.props.adTileTapped(s.props.post.id)}),x(V(s),"inViewHandler",function(){(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!e)return!1;var n=e.getBoundingClientRect(),r=Object(d.r)()+t;return 0<=n.bottom&&n.top<=r})(s.post.current)&&(s.props.adTileInView(s.props.post.id),Object(d.ab)("scroll",s.inViewHandler))}),s.post=T.a.createRef(),s.props.post.isAd&&(s.inViewHandler=i()(s.inViewHandler.bind(V(s)),100),Object(d.c)("scroll",s.inViewHandler)),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),function(e,t,n){t&&j(e.prototype,t),n&&j(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.post.isAd&&this.inViewHandler()}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.post,o=t.spinner,i=t.isUserLoggedIn,a=t.styles,s=t.onRemoveGalleryPage,l=t.isViewPort,u=t.onGalleryImageVote,c=t.usePrivacy,d=r.adUrl,p=r.adType,m=r.title,f=r.href,y=r.target,h=r.views,b=r.commentCount,v=r.ups,g=r.isAd,P=r.downs,E=r.isVideo,S=r.src,O=r.animationType,w=r.height,j=r.width,k=r.meta,V=i&&u&&(r.vote||C.s),_=N()((x(e={},n,!!n),x(e,"".concat(V,"vote"),!!V),x(e,"novote",!V),e));return T.a.createElement(A,{draggable:"false",onMouseEnter:this.handlerSaveGalleryPage,onMouseLeave:s,className:_,to:0<p&&d?d:f,target:y,onClick:this.clickHandler,innerRef:this.post},E?T.a.createElement(D.b,{animationType:O,styles:a,src:S,height:w,width:j,playVideo:S.playVideo&&l,spinner:o}):T.a.createElement(L.b,{src:S.image,height:w,width:j,styles:a,spinner:o}),this.props.children,T.a.createElement(R,{isPromotedAd:k.isPromotedAd,isThumbnailAd:k.isThumbnailAd,imagesCount:k.imagesCount,metaLabel:k.label}),T.a.createElement(U,{title:m,isNotAd:!g,views:h,privacy:c?r.privacy:""},T.a.createElement(M,{value:V===C.r?v+1:v,onVote:this.getVoteHandler(C.r),isVoted:this.isVoteHandler&&V===C.r}),i&&T.a.createElement(q,{value:V===C.q?P+1:P,onVote:this.getVoteHandler(C.q)}),T.a.createElement(I,{value:b})))}}]),t}();x(G,"defaultProps",{className:"",usePrivacy:!1});var F={onGalleryImageVote:l.B,onSaveGalleryPage:l.M,onRemoveGalleryPage:l.J,adTileInView:u.f,adTileTapped:u.g},W=Object(a.b)(null,F)(G);t.c=Object(c.a)(Object(a.b)(null,F)(G));G.__docgenInfo={description:"",methods:[{name:"getVoteHandler",docblock:null,modifiers:[],params:[{name:"voteType",type:null}],returns:null},{name:"handlerSaveGalleryPage",docblock:null,modifiers:[],params:[],returns:null},{name:"clickHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"inViewHandler",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PostHome",props:{className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},usePrivacy:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},post:{type:{name:"object"},required:!0,description:""},spinner:{type:{name:"object"},required:!0,description:""},isViewPort:{type:{name:"bool"},required:!1,description:""},isUserLoggedIn:{type:{name:"bool"},required:!0,description:""},styles:{type:{name:"object"},required:!1,description:""},onGalleryImageVote:{type:{name:"func"},required:!1,description:""},onSaveGalleryPage:{type:{name:"func"},required:!1,description:""},onRemoveGalleryPage:{type:{name:"func"},required:!1,description:""},children:{type:{name:"instanceOf",value:"Object"},required:!1,description:""},adTileInView:{type:{name:"func"},required:!1,description:""},adTileTapped:{type:{name:"func"},required:!1,description:""}}}},gmqy:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("q1tI"),a=n.n(r),o=(n("17x9"),n("DUmG")),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=e.isLoading,n=e.color,r=e.height;if(!t)return null;var o={position:"absolute",zIndex:"".concat(i.a.$zIndexPostSpinner),top:0,left:0,width:"100%",height:"".concat(r,"px"),background:"linear-gradient(".concat(n,", ").concat(i.a.$voyagerDarkGrey,")")};return a.a.createElement("div",{className:"Spinner",style:o})}function y(t){return function(e){function i(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(d(t=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}(this,(e=c(i)).call.apply(e,[this].concat(r)))),"state",{isLoading:!0}),m(d(t),"_isMounted",!1),m(d(t),"loadHandler",function(){t._isMounted&&t.setState({isLoading:!1})}),m(d(t),"errorHandler",function(){t.setState({isLoading:!1})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,a.a.Component),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(i,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.spinner;return a.a.createElement("div",{className:"Post-item-media",style:this.props.styles},a.a.createElement(f,{isLoading:this.state.isLoading,color:e.color,height:e.height}),a.a.createElement(t,l({},this.props,{onLoad:this.loadHandler,onError:this.errorHandler})))}}]),i}()}f.__docgenInfo={description:"",methods:[],displayName:"PostSpinner",props:{isLoading:{type:{name:"bool"},required:!1,description:""},color:{type:{name:"string"},required:!0,description:""},height:{type:{name:"number"},required:!0,description:""}}}},qhsG:function(e,t,n){},sWSo:function(e,t,n){"use strict";var r=n("q1tI"),m=n.n(r),o=(n("17x9"),n("ANjH")),i=n("/MKj"),f=n("zXN+"),a=n("wL9V"),s=n("N9yH"),l=n("sEfC"),u=n.n(l),c=n("Bw9V"),d=n("enaV"),p=n("+qLk"),y=n("ega+"),h=n("xypG");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=n("cF8P"),j=n("DUmG"),k=n.n(j);n("9DFJ");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=e.item;return m.a.createElement("div",{key:t.id,className:"PostWrapper",style:{height:t.size,background:"linear-gradient(".concat(t.colorLoading,", ").concat(k.a.$voyagerDarkGrey,")")}})}var M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,N(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,m.a.Component),function(e,t,n){t&&_(e.prototype,t),n&&_(e,n)}(t,[{key:"shouldComponentUpdate",value:function(e){return e.version!==this.props.version}},{key:"render",value:function(){var e=this.props,t=e.column,n=e.hasMargin,r=e.Child,o={width:w.c},i="Grid-column".concat("".concat(n?" hasMargin":""));return m.a.createElement("div",{style:o,className:i},t.getItems().map(function(e){return e.isInview?m.a.createElement("div",{key:e.id,style:{height:e.size,marginBottom:16}},m.a.createElement(r,{id:e.id,width:w.c,height:e.size,colorLoading:e.colorLoading,isViewPort:e.isViewPort})):m.a.createElement(q,{key:e.id,item:e})}))}}]),t}();M.__docgenInfo={description:"",methods:[],displayName:"FastColumn",props:{column:{type:{name:"object"},required:!0,description:""},version:{type:{name:"number"},required:!0,description:""},hasMargin:{type:{name:"bool"},required:!1,description:""},Child:{type:{name:"func"},required:!0,description:""}}};var I=n("GB65"),U=n("G5ih");n("LbAz");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return G}),n.d(t,"c",function(){return F});var G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,A(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,m.a.Component),function(e,t,n){t&&D(e.prototype,t),n&&D(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.mountGrid({width:this.props.viewPortWidth,viewUniform:this.props.shouldViewUniform,height:Object(I.r)()}),0<this.props.columnsCount&&this.props.modifyDisplayState({contentWidth:Object(f.a)(this.props.columnsCount)})}},{key:"componentWillReceiveProps",value:function(e){(e.columnsCount!==this.props.columnsCount&&this.props.modifyDisplayState({contentWidth:Object(f.a)(e.columnsCount)}),e.positionY!==this.props.positionY)&&(0<e.columns.length&&e.version!==this.props.version&&e.columns[0].getSize()-e.positionY<w.i&&this.props.moreDataFetch())}},{key:"shouldComponentUpdate",value:function(e){return e.version!==this.props.version||e.isFetching!==this.props.isFetching}},{key:"componentWillUnmount",value:function(){this.props.unmountGrid()}},{key:"render",value:function(){var e=this.props,t=e.topOffset,n=e.viewUniform,r=e.columns,o=e.isFetching,i=e.fetchError,a=e.posts,s=e.version,l=e.Child,u=e.emptyRow;if(0===r.length)return null;var c="FastGrid".concat(n?" uniform":""),d={marginTop:t,width:Object(f.a)(r.length)};if(i&&0===a.size)return m.a.createElement("h1",{className:"FastGrid-Error",style:d},Object(U.a)("explanationGeneric")," ",Object(U.a)("suggestionGeneric"));if(0===a.size&&!o&&u)return u();var p=r.slice().sort(function(e,t){return e.getId().slice(-1)-t.getId().slice(-1)});return m.a.createElement("div",{className:c,style:d},p.map(function(e,t){return m.a.createElement(M,{key:e.getId(),column:e,version:10*s+e.version,hasMargin:0!==t,Child:l})}))}}]),t}();function F(e){var t=e.gallery,n=e.fastGrid,r=e.display,o=e.posts;return{columns:n.get("columns"),version:n.get("version"),gridWidth:n.get("width"),topOffset:n.get("topOffset"),positionY:r.get("positionY"),columnsCount:n.get("columns").length,viewUniform:n.get("viewUniform"),shouldViewUniform:t.get("viewUniform"),isFetching:t.get("isFetching"),viewPortWidth:r.get("viewPort").get("width"),fetchError:t.get("fetchError"),posts:o.get("posts")}}t.b=Object(o.c)(function(t){var e=function(e){function i(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return O(E(n=function(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?E(e):t}(this,(e=P(i)).call.apply(e,[this].concat(r)))),"initialDataFetch",function(e){n.fetchGallery(Object.assign({},e||n.props,{streamPage:0,insertionModifier:c.h}))}),O(E(n),"moreDataFetch",function(){n.fetchGallery(Object.assign({},n.props,{insertionModifier:c.a}))}),O(E(n),"replaceDataFetch",function(e){n.fetchGallery(Object.assign({},e,{streamPage:0,insertionModifier:c.o}))}),O(E(n),"fetchGallery",u()(function(e){if(!n.props.isFetching){var t=e||n.props;n.props.fetchGallery(t.streamSection,t.streamParam,t.streamWindow,t.streamPage,t.streamSort,t.isPromoted,t.insertionModifier)}},p.p,{leading:!0,trailing:!1})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,m.a.Component),function(e,t,n){t&&g(e.prototype,t),n&&g(e,n)}(i,[{key:"componentDidMount",value:function(){this.props.setGalleryParams()}},{key:"componentWillUnmount",value:function(){this.props.cleanupGallery()}},{key:"componentWillReceiveProps",value:function(e){if(e.isInitialized&&this.props.isInitialized)return e.fetchError&&this.fetchGallery(),e.streamParam&&this.props.streamParam&&e.streamParam!==this.props.streamParam?this.replaceDataFetch(e):e.streamSection&&this.props.streamSection&&e.streamSection!==this.props.streamSection?this.replaceDataFetch(e):e.streamSort&&this.props.streamSort&&e.streamSort!==this.props.streamSort?this.replaceDataFetch(e):e.streamWindow&&this.props.streamWindow&&e.streamWindow!==this.props.streamWindow?this.replaceDataFetch(e):void 0;this.props.isInitialized?this.props.setGalleryParams():e.isInitialized&&(this.props.galleryPostRendererReady(),this.initialDataFetch(e))}},{key:"render",value:function(){return m.a.createElement(h.c,{isLoading:this.props.isFetching,isScrollSpinner:this.props.hasPosts},m.a.createElement(t,{Child:y.c,initialDataFetch:this.initialDataFetch,moreDataFetch:this.moreDataFetch}))}}]),i}();return e.displayName="WithGalleryData(".concat(function(e){return e.displayName||e.name||"Component"}(t),")"),Object(i.b)(function(e){var t=e.gallery,n=e.posts;return{streamSection:t.get("streamSection"),streamSort:t.get("streamSort"),streamPage:t.get("streamPage"),streamParam:t.get("streamParam"),streamWindow:t.get("streamWindow"),isFetching:t.get("isFetching"),isPromoted:t.get("streamIsPromoted"),fetchError:t.get("fetchError"),insertionModifier:t.get("insertionModifier"),isInitialized:t.get("isInitialized"),hasPosts:0<n.get("posts").size}},function(l){return{fetchGallery:(s=function(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){v(r,t,n,o,i,"next",e)}function i(e){v(r,t,n,o,i,"throw",e)}o(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,o,i,a,s){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(Object(c.E)({isFetching:!0})),e.next=3,l(Object(d.a)({gallery:t,param:n,streamWindow:r,page:o,sort:i,isPromoted:a,insertionModifier:s}));case 3:0===o&&l(Object(c.A)());case 4:case"end":return e.stop()}},e)})),function(e,t,n,r,o,i,a){return s.apply(this,arguments)}),galleryPostRendererReady:function(){return l(Object(c.C)())},cleanupGallery:function(){return l(Object(c.t)())}};var s})(e)},Object(i.b)(F,{modifyDisplayState:a.e,mountGrid:s.c,unmountGrid:s.d}))(G);G.__docgenInfo={description:"",methods:[],displayName:"FastGrid",props:{moreDataFetch:{type:{name:"func"},required:!0,description:""},mountGrid:{type:{name:"func"},required:!0,description:""},unmountGrid:{type:{name:"func"},required:!0,description:""},modifyDisplayState:{type:{name:"func"},required:!0,description:""},topOffset:{type:{name:"number"},required:!0,description:""},positionY:{type:{name:"number"},required:!0,description:""},viewUniform:{type:{name:"bool"},required:!0,description:""},shouldViewUniform:{type:{name:"bool"},required:!0,description:""},isFetching:{type:{name:"bool"},required:!0,description:""},columns:{type:{name:"instanceOf",value:"Object"},required:!0,description:""},version:{type:{name:"number"},required:!0,description:""},columnsCount:{type:{name:"number"},required:!0,description:""},gridWidth:{type:{name:"number"},required:!0,description:""},viewPortWidth:{type:{name:"number"},required:!0,description:""},fetchError:{type:{name:"instanceOf",value:"Object"},required:!1,description:""},posts:{type:{name:"instanceOf",value:"Object"},required:!0,description:""},Child:{type:{name:"func"},required:!0,description:""},emptyRow:{type:{name:"func"},required:!1,description:""}}}},wMLv:function(e,t,n){},yQno:function(e,t,n){}}]);