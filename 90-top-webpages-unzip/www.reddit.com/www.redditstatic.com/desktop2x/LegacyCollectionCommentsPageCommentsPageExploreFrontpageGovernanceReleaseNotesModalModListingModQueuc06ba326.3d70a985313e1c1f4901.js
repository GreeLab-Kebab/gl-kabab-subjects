(window.webpackJsonp=window.webpackJsonp||[]).push([["CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~c06ba326"],{"./src/lib/intersectionObserver/index.ts":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return r}));i("./node_modules/core-js/modules/web.dom.iterable.js"),i("./node_modules/core-js/modules/es6.array.iterator.js"),i("./node_modules/core-js/modules/es6.object.to-string.js"),i("./node_modules/core-js/modules/es6.string.iterator.js"),i("./node_modules/core-js/modules/es6.map.js");var s,n=new Map,a=new Map;"undefined"!=typeof window&&(i("./node_modules/intersection-observer/intersection-observer.js"),s=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target,i=e.intersectionRatio>0;if(i!==!!a.get(t)){a.set(t,i);var s=n.get(t);if(s)s(e,i&&!!a.get(t))}}))}),{threshold:[.001]}));var o=function(e,t){try{n.set(e,t),s&&s.observe(e)}catch(e){0}},r=function(e){try{n.delete(e),s&&s.unobserve(e)}catch(e){0}}},"./src/lib/onFocusAndVisibilityChange/index.ts":function(e,t,i){"use strict";var s,n=i("./node_modules/brcast/dist/brcast.es.js"),a=i("./node_modules/lodash/findKey.js"),o=i.n(a);!function(e){e.Hidden="hidden",e.Visible="visible"}(s||(s={}));var r={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},d=!1,l=Object(n.a)({documentInFocus:!0});!function(){if(!d){var e=o()(r,(function(e,t){return void 0!==document[t]}));e&&document.addEventListener(r[e],(function(){l.setState({documentInFocus:document.visibilityState!==s.Hidden})})),d=!0}}(),t.a={subscribe:function(e){return l.subscribe(e)},unsubscribe:function(e){l.unsubscribe(e)}}},"./src/reddit/components/Media/RichTextContainer/index.m.less":function(e,t,i){e.exports={richTextContainer:"Chtkt3BCZQruf0LtmFg2c",richTextContainerTitleOnly:"_2XNPI46MXRfDdsSoDqaksI",richTextContainerFull:"_3xX726aBn29LDbsDtzr_6E",placeholder:"_1aLU7RPNLdvfcbaNdcN11x",placeholderParagraph:"Owi9iYzjyVpDq_0YbCdJY",cleanupVariant:"_3lWzS77ngxpYib6BG4v9TE"}},"./src/reddit/components/Media/index.m.less":function(e,t,i){e.exports={hiddenLink:"_3dhFVFchWAAFXfLFTa94n9",displayNone:"_1Q2mF3u7v9hBVu_4bkC7R4",tweetPlaceholder:"_2IH8Z3uOFGn-TNLufw92zH",tweetEmbedBox:"_3G3xLNIwS59eiRVMICfR7x",isInvisible:"_1kw4-YNb840sdETnjL3_D3",tweetDeleted:"_2PLbyT4mrdGJGH5LY9Eotl"}},"./src/reddit/components/Media/index.tsx":function(e,t,i){"use strict";var s=i("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=i("./node_modules/@babel/runtime/helpers/esm/extends.js"),a=(i("./node_modules/core-js/modules/es6.object.assign.js"),i("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js")),o=i("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=i("./node_modules/@babel/runtime/helpers/esm/createClass.js"),d=i("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=i("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=i("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=(i("./node_modules/core-js/modules/web.dom.iterable.js"),i("./node_modules/core-js/modules/es6.array.iterator.js"),i("./node_modules/core-js/modules/es6.object.to-string.js"),i("./node_modules/core-js/modules/es6.string.iterator.js"),i("./node_modules/core-js/modules/es6.set.js"),i("./node_modules/lodash/debounce.js")),p=i.n(u),m=i("./node_modules/react/index.js"),h=i.n(m),b=i("./src/lib/classNames/index.ts"),f=i("./src/lib/CSSVariableProvider/withTheme.tsx"),v=i("./src/lib/env/index.ts"),g=i("./src/lib/intersectionObserver/index.ts"),x=i("./src/lib/isUrl/index.ts"),w=i("./src/lib/onFocusAndVisibilityChange/index.ts"),j=i("./src/lib/permalinkToOverlayLocation/index.ts"),y=i("./src/lib/raven/index.ts"),C=i("./src/reddit/components/HTML5StreamPlayer/index.tsx"),O=i("./src/reddit/components/Media/EmbedBox/index.tsx"),E=i("./src/reddit/components/Media/ImageBox/index.tsx"),S=i("./src/reddit/components/Media/MediaContainer/index.tsx"),N=(i("./node_modules/core-js/modules/es6.symbol.js"),i("./src/reddit/constants/componentSizes.ts")),I=i("./src/reddit/models/Media/index.ts"),M=i("./node_modules/react-redux/es/index.js"),L=i("./src/reddit/actions/post.ts"),T=i("./src/reddit/helpers/styles/mixins/loading.ts"),P=i("./src/reddit/components/Media/RichTextContainer/index.m.less"),W=i.n(P),F=Object(M.b)(null,(function(e){return{onLoadRichTextContentIfNeeded:function(t){return e(Object(L.r)(t))}}}))(function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadRichTextContentIfNeeded()}},{key:"loadRichTextContentIfNeeded",value:function(){this.props.canLoadContent&&this.props.isExpando&&this.props.onLoadRichTextContentIfNeeded(this.props.postId)}},{key:"render",value:function(){var e=Object(T.a)({isLoading:!0});return h.a.createElement("div",{className:W.a.placeholder},[1,2,3].map((function(t){return h.a.createElement("div",{key:t,className:W.a.placeholderParagraph},h.a.createElement("div",{className:e}),h.a.createElement("div",{className:e}),h.a.createElement("div",{className:e}))})))}}]),t}(h.a.Component)),V=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i},R=function(e){var t,i=e.canLoadContent,a=e.children,o=e.className,r=e.isCleanupVariant,d=e.isCommentsPage,l=e.isMediumHeight,c=e.isRichTextTruncated,u=e.isExpando,p=e.isTitleOnly,m=e.postId,f=e.showFull,v=V(e,["canLoadContent","children","className","isCleanupVariant","isCommentsPage","isMediumHeight","isRichTextTruncated","isExpando","isTitleOnly","postId","showFull"]),g=(t={},Object(s.a)(t,W.a.richTextContainerFull,f),Object(s.a)(t,W.a.richTextContainerTitleOnly,p&&!f),Object(s.a)(t,W.a.richTextContainer,!f&&!p),Object(s.a)(t,W.a.cleanupVariant,r),t),x={};f||(x.maxHeight="".concat(p?I.l:l?I.k:I.j,"px")),d&&(x.maxWidth="".concat(N.e,"px"));var w=c&&f;return h.a.createElement("div",Object(n.a)({className:Object(b.a)(g,o),style:x},v),a,w&&h.a.createElement(F,{canLoadContent:!!i,isExpando:u,postId:m}))},k=i("./src/reddit/components/Media/VideoBox/index.tsx"),B=i("./src/reddit/components/PlayButton/index.tsx"),D=i("./src/reddit/helpers/styles/postBackgroundColor.ts"),_=i("./src/reddit/helpers/styles/smartTextColor.ts"),H=i("./src/reddit/components/RawHTMLDisplay/index.tsx"),A=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i},G=Object(f.a)((function(e){var t=e.flairStyleTemplate,i=A(e,["flairStyleTemplate"]);return h.a.createElement(H.a,Object(n.a)({style:{color:Object(_.a)(Object(D.a)(Object.assign({flairStyleTemplate:t},i)))}},i))})),U=i("./src/reddit/components/RichTextJson/index.tsx"),z=i("./src/reddit/constants/screenWidths.ts"),J=i("./src/reddit/helpers/canPreviewSelfText/index.ts"),Y=i("./src/reddit/helpers/getRichTextContent.ts"),q=i("./src/reddit/helpers/postHasSelfText/index.ts"),X=(i("./node_modules/core-js/modules/es6.regexp.replace.js"),i("./src/lib/redditId/index.ts"));function Q(e,t,i){return e.replace('href="https://www.reddit.com/poll/'.concat(Object(X.c)(t)),'class="'.concat(i,'" href="https://www.reddit.com/poll/').concat(Object(X.c)(t)))}i("./node_modules/core-js/modules/es7.array.includes.js"),i("./node_modules/core-js/modules/es6.string.includes.js"),i("./node_modules/core-js/modules/es7.symbol.async-iterator.js");function Z(e,t){var i=function e(t,i){var s=!1;var n=[];try{var a=!0,o=!1,r=void 0;try{for(var d,l=t[Symbol.iterator]();!(a=(d=l.next()).done);a=!0){var c=d.value;if("link"===c.e&&c.u&&c.u.includes("https://www.reddit.com/poll/".concat(i)))s=!0;else if(c.c&&"string"!=typeof c.c){var u=e(c.c,i);u.found?(s=!0,("par"!==c.e||u.updated.length)&&n.push(Object.assign({},c,{c:u.updated}))):n.push(c)}else n.push(c)}}catch(e){o=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw r}}}catch(e){s=!1,n=[]}return{found:s,updated:s?n:t}}(e.document,Object(X.c)(t));return i.found?{document:i.updated}:e}var K=i("./src/reddit/i18n/utils.ts"),$=i("./src/reddit/selectors/experiments/postCleanup.ts"),ee=function(e,t){for(var i=0;i<t.length;i++){var s=t[i];if(s.width>=e)return s}},te=function(e,t,i){for(var s=0;s<i.length;s++){var n=i[s];if(n.width>=I.e/2&&(a=e,o=t,r=n.height,d=n.width,l=void 0,c=void 0,l=a/o,c=r/d,Math.abs(l-c)<.03))return n}var a,o,r,d,l,c},ie=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.height>=I.e||i.width>=I.f)return i}},se=i("./src/reddit/components/Media/index.m.less"),ne=i.n(se),ae="https://www.redditmedia.com",oe="player.js",re=N.s+N.r,de=function(e){return e.isVisible?e.children:h.a.createElement("div",{className:ne.a.displayNone},e.children)},le=new Set([I.n.EMBED,I.n.GIFVIDEO,I.n.VIDEO]),ce=new Set([I.n.EMBED,I.n.GIFVIDEO,I.n.IMAGE,I.n.VIDEO]),ue=function(e){var t=e.post,i=e.postCleanupVariant,s=e.goldPostRefactorVariant;return!!t.media&&ce.has(t.media.type)||!!i&&Object($.a)(t)||!!s&&Object($.a)(t)},pe=function(e){function t(e){var i;return Object(o.a)(this,t),(i=Object(d.a)(this,Object(l.a)(t).call(this,e))).pauseContent=function(){i.shouldFocusContentDebouncer(!1)},i.stopContent=function(){var e=i.props.post.media;if(e&&I.d.has(e.type)){if(i.iframe){var t=e.type===I.n.EMBED?e.provider:null;i.pauseEmbed(i.iframe,t)}i.setState((function(e){return e.shouldStop?null:{shouldStop:!0}}))}},i.handleVisibilityChange=function(e){var t=i.state.shouldPause,s=i.props.autoplayPref;i.iframe&&(t||!s&&e.documentInFocus||i.toggleEmbedAutoplay(i.iframe,!e.documentInFocus)),i.setState({forcePause:!e.documentInFocus})},i.focusContent=function(){i.shouldFocusContentDebouncer(!0)},i.loadContent=function(){i.setState((function(e){return e.canLoadContent?null:{canLoadContent:!0}}))},i.unmountContent=function(){},i.contentIsHeavyToMount=function(){var e=i.props.post.media;return!!e&&I.d.has(e.type)},i.shouldFocusContentDebouncer=p()((function(e){var t=i.props.post.media,s=i.props.autoplayPref;if(t&&I.d.has(t.type)){if(i.iframe){var n=t.type===I.n.EMBED?t.provider:null;n&&!I.q.has(n)?!s&&e||i.toggleEmbedAutoplay(i.iframe,!e):e||i.pauseEmbed(i.iframe,n)}e?i.setState((function(e){return e.shouldPause||!e.canLoadContent?{canLoadContent:!0,shouldPause:!1,shouldStop:!1}:null})):i.setState((function(e){return e.shouldPause?null:{shouldPause:!0}}))}}),250,{leading:!0}),i.toggleEmbedAutoplay=function(e,t){if(e.contentWindow){var i=t?I.g.Pause:I.g.Play;e.contentWindow.postMessage({context:oe,method:i},ae),e.contentWindow.postMessage({context:oe,method:I.g.Mute},ae)}},i.pauseEmbed=function(e,t){e.contentWindow&&(t===I.t.YouTube?e.contentWindow.postMessage(JSON.stringify({event:"command",func:I.x.Pause}),ae):e.contentWindow.postMessage({context:oe,method:I.g.Pause},ae))},i.onIframeLoaded=function(){var e=i.props.post.media,t=i.props.autoplayPref,s=e&&e.type===I.n.EMBED?e.provider:null;if(i.iframe&&s&&!I.q.has(s)){var n=i.state.shouldPause;(t||n)&&i.toggleEmbedAutoplay(i.iframe,n)}},i.onImageBoxClick=function(e){i.props.isListing||!i.shouldBlur()||i.state.isRevealed||(i.setState({isRevealed:!0}),e.preventDefault(),e.stopPropagation())},i.storeChildRef=function(e){i.iframe=e,i.iframe&&i.props.post.media&&"embed"===i.props.post.media.type&&i.props.post.media.provider===I.t.Twitter&&g.a(i.iframe,(function(e,t){i.iframe&&i.iframe.contentWindow&&i.props.post.media&&"embed"===i.props.post.media.type&&!i.props.post.media.height&&t&&i.iframe.contentWindow.postMessage("twitter-measure-requested",ae)}))},i.updateDimensions=function(){i.setState({viewportHeight:window.innerHeight,viewportWidth:window.innerWidth})},i.isSpoiler=function(){return i.props.post.isSpoiler||!(!i.props.crosspost||!i.props.crosspost.isSpoiler)},i.isNSFW=function(){return i.props.post.isNSFW||!(!i.props.crosspost||!i.props.crosspost.isNSFW)},i.state={canLoadContent:e.shouldLoad||!1,forcePause:!1,isRevealed:!1,shouldPause:void 0===e.shouldPause||e.shouldPause,shouldStop:void 0===e.shouldStop||e.shouldStop,viewportHeight:I.e,viewportWidth:I.f},i}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){"undefined"!=typeof window&&(this.updateDimensions(),window.addEventListener("resize",this.updateDimensions))}},{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.post).media&&le.has(e.media.type)&&(this.visibilityChangeSubscriptionId=w.a.subscribe((function(e){t.handleVisibilityChange(e)}))),this.props.scrollerItemRef&&ue(this.props)&&this.props.scrollerItemRef(this,this.state.canLoadContent)}},{key:"componentWillUnmount",value:function(){this.visibilityChangeSubscriptionId&&w.a.unsubscribe(this.visibilityChangeSubscriptionId),this.props.scrollerItemRef&&ue(this.props)&&this.props.scrollerItemRef(void 0),window.removeEventListener("resize",this.updateDimensions),this.iframe&&this.props.post.media&&"embed"===this.props.post.media.type&&this.props.post.media.provider===I.t.Twitter&&g.b(this.iframe)}},{key:"componentWillReceiveProps",value:function(e){!this.state.canLoadContent&&e.shouldLoad&&this.setState({canLoadContent:!0}),void 0!==e.shouldPause&&e.shouldPause!==this.props.shouldPause&&this.shouldFocusContentDebouncer(!e.shouldPause)}},{key:"getVideoExpandoMaxDimensions",value:function(){var e,t=Math.max(I.i,this.state.viewportHeight),i=Math.min(1200,16*t/9);1200===i&&(t=675),e=this.state.viewportWidth>=z.c?this.state.viewportWidth<N.m?this.state.viewportWidth-re-150:this.state.viewportWidth-re-N.f-150:this.state.viewportWidth-150;var s=this.state.viewportHeight-150;if(i>e)t*=e/i,i=e;else if(t>s){var n=s/t;t=s,i*=n}return{maxVideoHeight:t,maxVideoWidth:i}}},{key:"getVideoMaxDimensions",value:function(e,t){var i=I.i,s=I.m;return e.isExpando?this.getVideoExpandoMaxDimensions():(e.isPromotedTrend&&(i=I.r,s=I.s),{maxVideoHeight:i,maxVideoWidth:s})}},{key:"getMediaInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,i=e.availableWidth,s=e.goldPostRefactorVariant,n=e.post,o=n.media&&n.media.obfuscated||"",r=n.media&&!Object(I.E)(n.media)?n.media.content:"",d=!n.media||Object(I.C)(n.media)||Object(I.D)(n.media)?[0,0]:[n.media.height,n.media.width],l=Object(a.a)(d,2),c=l[0],u=l[1];if(i&&n.media&&(n.media.type===I.n.IMAGE||n.media.type===I.n.GIFVIDEO)){var p=ee(i,n.media.resolutions);p&&(r=p.url,u=p.width,c=p.height)}else if(i&&n.preview&&(e.postCleanupVariant||s)&&Object($.a)(n))r=n.preview.url,u=n.preview.width,c=n.preview.height;else if(n&&n.media&&(!e.isListing||e.isExpando)&&(n.media.type===I.n.IMAGE||n.media.type===I.n.GIFVIDEO)){var m;(m=Object(E.b)(n.media.height,n.media.width)&&Object(E.c)(n.media.height)?te(n.media.height,n.media.width,n.media.resolutions):ie(n.media.resolutions))&&(r=m.url,u=m.width,c=m.height)}if(e.isExpando)if(u>t.viewportWidth){var h=t.viewportWidth/u;c*=h,u=t.viewportWidth}else if(c>t.viewportHeight){var b=t.viewportHeight/c;c=t.viewportHeight,u*=b}var f=this.getVideoMaxDimensions(e,t),v=f.maxVideoHeight,g=f.maxVideoWidth;if(n.media&&n.media.type===I.n.VIDEO){var x=c/u;e.isExpando?(c=v,u=g):x>I.c?(c=v,u=Math.min(Math.max(v/x,I.p),g)):(c=Math.min(Math.max(g*x,I.o),v),u=g)}n.media&&n.media.type===I.n.EMBED&&e.isExpando&&n.media.provider!==I.t.Twitter&&(c=v,u=g);var w=!1;if(e.isMiniCard){var j=c/u,y=Math.abs(j-I.c)>.01;w=y}return{source:r,obfuscated:o,width:u,height:c,needsBackgroundBlur:w}}},{key:"shouldBlur",value:function(){var e=this.props,t=e.isExpando,i=e.isOverlay,s=e.theme,n=this.isNSFW(),a=this.isSpoiler();return!(t||this.state.isRevealed||i)&&(n&&!s.subredditContext.shouldShowNSFWContent||a)}},{key:"render",value:function(){var e=this.props,t=e.className,i=e.crosspost,a=e.flairStyleTemplate,o=e.forceAspectRatio,r=e.goldPostRefactorVariant,d=e.isCommentsPage,l=e.isExpando,c=e.isListing,u=e.isNotCardView,p=e.isMediumHeight,m=e.isTitleOnly,f=e.post,g=e.postCleanupVariant,w=e.showCentered,N=e.showFull,M=void 0!==N&&N,L=this.state,P=L.canLoadContent,W=L.forcePause,F=L.shouldPause,V=L.shouldStop,D=L.viewportWidth,_=(!!g||!!r)&&Object($.a)(f);if(!f.media&&!_)return null;var H=W||F,A=V,z=this.getMediaInfo(this.props,this.state),X=z.source,ee=z.obfuscated,te=z.height,ie=z.width,se=z.needsBackgroundBlur,ae={showCentered:w,isListing:c,showFull:M,height:te,width:ie},oe=Object.assign({},ae,{className:t,forceAspectRatio:o,viewportWidth:D}),re=this.shouldBlur(),le=!(!f.isSponsored||!f.source);if(ee&&re)return h.a.createElement(S.a,Object(n.a)({},oe,{blurSrc:ee}),h.a.createElement(de,{isVisible:P},h.a.createElement(E.a,Object(n.a)({},ae,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isListing:c,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),isVideoThumbnail:!!f.media&&f.media.type===I.n.VIDEO,onClick:this.onImageBoxClick,postId:f.id,shouldBlur:re,source:ee,outboundUrl:le&&f.source.outboundUrl||void 0,originalSource:X}))));if(_){var ce=this.state.viewportHeight-150,ue=this.state.viewportWidth-150,pe=f.preview&&Object(x.a)(f.preview.url)?f.preview.url:X;return h.a.createElement(S.a,Object(n.a)({},oe,{blurSrc:se?pe:void 0,isExpando:!!l}),h.a.createElement(de,{isVisible:P},h.a.createElement(E.a,Object(n.a)({},ae,{isCrosspost:!!i,isExpando:l,isListing:c,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),maxHeight:l?ce:void 0,maxWidth:l?ue:void 0,postId:f.id,shouldBlur:re,source:pe,outboundUrl:le&&f.source.outboundUrl||void 0,originalSource:pe}))))}if(!f.media)return null;switch(f.media.type){case I.n.RTJSON:var me=Object(Y.a)(f,null);if(null===me)return;return M||Object(J.a)(f)?h.a.createElement(R,{canLoadContent:P,className:t,"data-click-id":"text",isCleanupVariant:!!r,isCommentsPage:d,isExpando:l,isMediumHeight:p,isRichTextTruncated:f.media.isRichtextPreview,isTitleOnly:m,postId:f.id,showFull:M},h.a.createElement(U.a,{flairStyleTemplate:a,content:f.isMeta?Z(me,f.id):me,mediaMetadata:f.media.mediaMetadata,renderingObjectInfo:f,renderMediaAsLinks:c})):null;case I.n.TEXT:if(Object(q.a)(f)){var he="Text post should not include body content";return Object(y.c)(he,{extra:{info:{post:f,isListing:c,isCommentsPage:d}}}),Object(v.a)()&&console.log("".concat(f.id,": ").concat(he)),h.a.createElement(R,{postId:f.id,className:t,"data-click-id":"text",isCleanupVariant:!!r,isCommentsPage:d,showFull:M},h.a.createElement(G,{flairStyleTemplate:a,html:f.isMeta?Q(f.media.content,f.id,ne.a.hiddenLink):f.media.content}))}return null;case I.n.EMBED:if(this.props.isMiniCard&&f.preview&&f.preview.url)return h.a.createElement(S.a,Object(n.a)({},oe,{alwaysWrapMedia:!0}),h.a.createElement(de,{isVisible:P},h.a.createElement(h.a.Fragment,null,h.a.createElement(E.a,Object(n.a)({},ae,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:l,isListing:c,isNSFW:this.isNSFW(),isCrosspost:!!i,isSpoiler:this.isSpoiler(),postId:f.id,shouldBlur:re,source:f.preview.url,originalSource:f.preview.url})),h.a.createElement(B.a,null))));if(I.h.has(f.media.provider)){if(f.media.provider===I.t.Twitter){var be=te||(f.media.isDeleted?100:300);return h.a.createElement(S.a,Object(n.a)({},oe,{alwaysWrapMedia:!0,height:be,showFull:!0,width:350}),P&&h.a.createElement(h.a.Fragment,null,!te&&(f.media.isDeleted?h.a.createElement("p",{className:ne.a.tweetDeleted},Object(K.c)("This Tweet has been deleted.")):h.a.createElement("div",{className:Object(b.a)(Object(T.a)({isLoading:!0}),ne.a.tweetPlaceholder)})),h.a.createElement(O.a,{childRef:this.storeChildRef,className:Object(b.a)(ne.a.tweetEmbedBox,Object(s.a)({},ne.a.isInvisible,!te)),height:be,isListing:c,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:w,showFull:!0,source:X,title:f.title,width:350})))}return h.a.createElement(S.a,Object(n.a)({},oe,{alwaysWrapMedia:!0,height:l?te:I.i,width:l?ie:I.i*(16/9)}),P&&h.a.createElement(O.a,{childRef:this.storeChildRef,height:l?te:I.i,width:l?ie:void 0,isListing:c,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:w,showFull:M,source:X,title:f.title}))}return h.a.createElement(S.a,Object(n.a)({},oe,{alwaysWrapMedia:!0}),P&&h.a.createElement(O.a,Object(n.a)({},ae,{isResponsive:l||f.media.provider===I.t.IFrameEmbed,title:f.title,childRef:this.storeChildRef,onLoad:this.onIframeLoaded,source:X,fullWidth:f.media.provider===I.t.IFrameEmbed})));case I.n.GIFVIDEO:var fe=te,ve=ie;return fe>I.i&&(ve=ie/te*(fe=I.i)),h.a.createElement(S.a,Object(n.a)({},oe,{blurSrc:se?f.media.gifBackgroundImage:void 0}),h.a.createElement(de,{isVisible:P},h.a.createElement(k.a,Object(n.a)({},ae,{isNotCardView:u,height:l?void 0:fe,width:l?void 0:ve,postId:f.id,shouldLoad:!0,shouldPause:H,source:X,originalSource:f.media.content}))));case I.n.VIDEO:var ge=f.media.posterUrl||f.preview&&f.preview.url;return this.props.isMiniCard&&ge?h.a.createElement(S.a,Object(n.a)({},oe,{alwaysWrapMedia:!0}),h.a.createElement(de,{isVisible:P},h.a.createElement(h.a.Fragment,null,h.a.createElement(E.a,Object(n.a)({},ae,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:l,isListing:c,isNSFW:this.isNSFW(),isCrosspost:!!i,isSpoiler:this.isSpoiler(),postId:f.id,shouldBlur:re,source:ge,originalSource:ge})),h.a.createElement(B.a,null)))):h.a.createElement(S.a,Object(n.a)({},oe,{alwaysWrapMedia:!0,isVideo:!0}),P&&h.a.createElement(C.b,{autoPlay:"boolean"==typeof F?!F:void 0,isExpando:l,postUrl:Object(j.a)(f.permalink),shouldLoad:!0,shouldPause:H,shouldStop:A,hlsSource:f.media.hlsUrl,mpegDashSource:f.media.dashUrl,isGif:f.media.isGif,scrubberThumbSource:f.media.scrubberThumbSource,postId:f.id,callToActionSource:f.source||void 0,callToActionText:f.callToAction,isListing:c,posterUrl:f.media.posterUrl}));case I.n.IMAGE:var xe=this.state.viewportHeight-150,we=this.state.viewportWidth-150,je=X;return this.props.isMiniCard&&!this.props.isMiniCardHQPreviews&&(f.thumbnail&&Object(x.a)(f.thumbnail.url)?je=f.thumbnail.url:f.preview&&Object(x.a)(f.preview.url)&&(je=f.preview.url)),h.a.createElement(S.a,Object(n.a)({},oe,{blurSrc:se?je:void 0,isExpando:!!l}),h.a.createElement(de,{isVisible:P},h.a.createElement(E.a,Object(n.a)({},ae,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:l,isListing:c,isNSFW:this.isNSFW(),isCrosspost:!!i,isSpoiler:this.isSpoiler(),maxHeight:l?xe:void 0,maxWidth:l?we:void 0,postId:f.id,shouldBlur:re,source:je,outboundUrl:le&&f.source.outboundUrl||void 0,originalSource:f.media.content}))));default:return null}}}]),t}(h.a.Component);t.a=Object(f.a)(pe)},"./src/reddit/helpers/canPreviewSelfText/index.ts":function(e,t,i){"use strict";var s=i("./src/reddit/helpers/postHasSelfText/index.ts");t.a=function(e){return Object(s.a)(e)&&!e.isSpoiler&&!e.isNSFW}},"./src/reddit/helpers/postHasSelfText/index.ts":function(e,t,i){"use strict";var s=i("./src/reddit/models/Media/index.ts"),n=i("./src/reddit/models/RichTextJson/index.ts");t.a=function(e){var t=e&&e.media;return!!t&&(t.type===s.n.TEXT&&!!t.content||t.type===s.n.RTJSON&&!Object(n.E)(t.richtextContent))}},"./src/reddit/selectors/experiments/postCleanup.ts":function(e,t,i){"use strict";i.d(t,"e",(function(){return p})),i.d(t,"d",(function(){return m})),i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return b})),i.d(t,"a",(function(){return f}));var s=i("./node_modules/reselect/es/index.js"),n=i("./src/lib/isUrl/index.ts"),a=i("./src/reddit/constants/experiments.ts"),o=i("./src/reddit/contexts/PageLayer/index.tsx"),r=i("./src/reddit/helpers/chooseVariant/index.ts"),d=i("./src/reddit/selectors/experiments/utils.ts"),l=i("./src/reddit/selectors/platform.ts"),c=i("./src/reddit/selectors/user.ts"),u=Object(s.a)(c.J,(function(e,t){var i=t.pageLayer;return Object(o.z)(i)}),o.q,l.i,(function(e,t){var i=t.pageLayer;return Object(o.w)(i)}),(function(e,t,i,s,n){return!e&&(t||!!i||s&&n)})),p=Object(s.a)((function(e,t){return Object(r.b)(e,{experimentEligibilitySelector:function(e){return u(e,t)},experimentName:a.y})}),d.a),m=function(e){return e===a.ib.NewOutlineCommentLink2||e===a.ib.NewOutlineCommentLink3},h=function(e){return e===a.ib.NewOutlineCommentLink3||e===a.ib.NewOutlineCommentLink4||e===a.ib.NewOutlineCommentLink5},b=function(e){return e===a.ib.NewOutlineCommentLink4||e===a.ib.NewOutlineCommentLink5},f=function(e){return!(e.media||!e.source||!e.preview||!Object(n.a)(e.preview.url))}}}]);
//# sourceMappingURL=Legacy~CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~c06ba326.3d70a985313e1c1f4901.js.map